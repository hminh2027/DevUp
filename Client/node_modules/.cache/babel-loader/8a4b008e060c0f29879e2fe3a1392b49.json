{"ast":null,"code":"import axios from 'axios';\n\nconst postLogin = async (bodyFormData, dispatch) => {\n  try {\n    const res = await axios.post('http://localhost:5000/api/auth/login', bodyFormData, {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    });\n\n    if (res.status === 200) {\n      localStorage.setItem('TOKEN', res.data.accessToken);\n      dispatch(authActions.login());\n    }\n\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nconst getLogin = async () => {\n  axios.defaults.headers.common['Authorization'] = `Bearer + ${localStorage[TOKEN]}`;\n\n  try {\n    const res = await axios.get('http://localhost:5000/api/auth/login');\n    if (res.status === 200) dispatch(authActions.login());\n  } catch (err) {\n    localStorage.removeItem(TOKEN);\n    delete axios.defaults.headers.common['Authorization'];\n    dispatch(authActions.logout());\n    res.status(400).send(err.message);\n  }\n};\n\nexport { postLogin };","map":{"version":3,"sources":["D:/Project Web/PROJECT 12 (Only MERN)/Client/client/src/apis/Axios.js"],"names":["axios","postLogin","bodyFormData","dispatch","res","post","headers","status","localStorage","setItem","data","accessToken","authActions","login","err","response","getLogin","defaults","common","TOKEN","get","removeItem","logout","send","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,SAAS,GAAG,OAAOC,YAAP,EAAoBC,QAApB,KAAiC;AAC/C,MAAI;AACA,UAAMC,GAAG,GAAG,MAAMJ,KAAK,CAACK,IAAN,CAAW,sCAAX,EAAkDH,YAAlD,EAA+D;AAC7EI,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB;AADoE,KAA/D,CAAlB;;AAGA,QAAGF,GAAG,CAACG,MAAJ,KAAe,GAAlB,EAAsB;AAClBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BL,GAAG,CAACM,IAAJ,CAASC,WAAtC;AACAR,MAAAA,QAAQ,CAACS,WAAW,CAACC,KAAZ,EAAD,CAAR;AAEH;;AACD,WAAOT,GAAP;AACH,GAVD,CAUE,OAAMU,GAAN,EAAW;AACT,WAAOA,GAAG,CAACC,QAAX;AACH;AACJ,CAdD;;AAgBA,MAAMC,QAAQ,GAAG,YAAY;AACzBhB,EAAAA,KAAK,CAACiB,QAAN,CAAeX,OAAf,CAAuBY,MAAvB,CAA8B,eAA9B,IAAkD,YAAWV,YAAY,CAACW,KAAD,CAAQ,EAAjF;;AACA,MAAI;AACA,UAAMf,GAAG,GAAG,MAAMJ,KAAK,CAACoB,GAAN,CAAU,sCAAV,CAAlB;AACA,QAAGhB,GAAG,CAACG,MAAJ,KAAe,GAAlB,EAAuBJ,QAAQ,CAACS,WAAW,CAACC,KAAZ,EAAD,CAAR;AAC1B,GAHD,CAGE,OAAMC,GAAN,EAAW;AACTN,IAAAA,YAAY,CAACa,UAAb,CAAwBF,KAAxB;AACA,WAAOnB,KAAK,CAACiB,QAAN,CAAeX,OAAf,CAAuBY,MAAvB,CAA8B,eAA9B,CAAP;AACAf,IAAAA,QAAQ,CAACS,WAAW,CAACU,MAAZ,EAAD,CAAR;AACAlB,IAAAA,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBgB,IAAhB,CAAqBT,GAAG,CAACU,OAAzB;AACH;AACJ,CAXD;;AAaA,SAAQvB,SAAR","sourcesContent":["import axios from 'axios';\r\n\r\nconst postLogin = async (bodyFormData,dispatch) => {\r\n    try {\r\n        const res = await axios.post('http://localhost:5000/api/auth/login',bodyFormData,{\r\n            headers: {'content-type': 'multipart/form-data'}\r\n        });\r\n        if(res.status === 200){\r\n            localStorage.setItem('TOKEN',res.data.accessToken);\r\n            dispatch(authActions.login());\r\n\r\n        }\r\n        return res;\r\n    } catch(err) {\r\n        return err.response;\r\n    }\r\n}\r\n\r\nconst getLogin = async () => {\r\n    axios.defaults.headers.common['Authorization'] = `Bearer + ${localStorage[TOKEN]}`;\r\n    try {\r\n        const res = await axios.get('http://localhost:5000/api/auth/login');\r\n        if(res.status === 200) dispatch(authActions.login());\r\n    } catch(err) {\r\n        localStorage.removeItem(TOKEN);\r\n        delete axios.defaults.headers.common['Authorization'];\r\n        dispatch(authActions.logout());\r\n        res.status(400).send(err.message);\r\n    }\r\n}\r\n\r\nexport {postLogin};"]},"metadata":{},"sourceType":"module"}