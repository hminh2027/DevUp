{"ast":null,"code":"import _regeneratorRuntime from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{follow,unfollow}from'../../store/actions/profileAction';import styles from'./FollowBtn.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FollowBtn=function FollowBtn(_ref){var user=_ref.user;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),followed=_useState2[0],setFollowed=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),load=_useState4[0],setLoad=_useState4[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,socket=_useSelector.socket;useEffect(function(){if(auth.user.following.find(function(item){return item._id===user._id;})){setFollowed(true);}else return function(){return setFollowed(false);};},[auth.user.following,user._id]);var followHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!load){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoad(true);setFollowed(true);_context.next=6;return dispatch(follow(auth,user,socket));case 6:setLoad(false);case 7:case\"end\":return _context.stop();}}},_callee);}));return function followHandler(){return _ref2.apply(this,arguments);};}();var unfollowHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!load){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setLoad(true);setFollowed(false);_context2.next=6;return dispatch(unfollow(auth,user,socket));case 6:setLoad(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function unfollowHandler(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:followed?/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(styles.btn,\" \").concat(styles.unfollow_btn),onClick:unfollowHandler,children:\" Unfollow \"}):/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(styles.btn,\" \").concat(styles.follow_btn),onClick:followHandler,children:\" Follow \"})});};export default FollowBtn;","map":{"version":3,"sources":["D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/src/components/profile/FollowBtn.js"],"names":["React","useEffect","useState","useDispatch","useSelector","follow","unfollow","styles","FollowBtn","user","dispatch","followed","setFollowed","load","setLoad","state","auth","socket","following","find","item","_id","followHandler","unfollowHandler","btn","unfollow_btn","follow_btn"],"mappings":"0gBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CAEA,OAASC,MAAT,CAAiBC,QAAjB,KAAiC,mCAAjC,CAEA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,C,gGAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAY,IAAVC,CAAAA,IAAU,MAAVA,IAAU,CAC1B,GAAMC,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CAEA,cAAgCD,QAAQ,CAAC,KAAD,CAAxC,wCAAOS,QAAP,eAAiBC,WAAjB,eACA,eAAwBV,QAAQ,CAAC,KAAD,CAAhC,yCAAOW,IAAP,eAAaC,OAAb,eAEA,iBAAuBV,WAAW,CAAC,SAAAW,KAAK,QAAEA,CAAAA,KAAF,EAAN,CAAlC,CAAOC,IAAP,cAAOA,IAAP,CAAaC,MAAb,cAAaA,MAAb,CAEAhB,SAAS,CAAC,UAAI,CACV,GAAGe,IAAI,CAACP,IAAL,CAAUS,SAAV,CAAoBC,IAApB,CAAyB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,GAAL,GAAaZ,IAAI,CAACY,GAAtB,EAA7B,CAAH,CAA2D,CACvDT,WAAW,CAAC,IAAD,CAAX,CACH,CAFD,IAGK,OAAO,kBAAMA,CAAAA,WAAW,CAAC,KAAD,CAAjB,EAAP,CAER,CANQ,CAMP,CAACI,IAAI,CAACP,IAAL,CAAUS,SAAX,CAAsBT,IAAI,CAACY,GAA3B,CANO,CAAT,CAQA,GAAMC,CAAAA,aAAa,2FAAG,uIACfT,IADe,iEAElBC,OAAO,CAAC,IAAD,CAAP,CACAF,WAAW,CAAC,IAAD,CAAX,CAHkB,sBAIZF,CAAAA,QAAQ,CAACL,MAAM,CAACW,IAAD,CAAOP,IAAP,CAAaQ,MAAb,CAAP,CAJI,QAKlBH,OAAO,CAAC,KAAD,CAAP,CALkB,sDAAH,kBAAbQ,CAAAA,aAAa,2CAAnB,CAQA,GAAMC,CAAAA,eAAe,2FAAG,4IACjBV,IADiB,mEAEpBC,OAAO,CAAC,IAAD,CAAP,CACAF,WAAW,CAAC,KAAD,CAAX,CAHoB,uBAIdF,CAAAA,QAAQ,CAACJ,QAAQ,CAACU,IAAD,CAAOP,IAAP,CAAaQ,MAAb,CAAT,CAJM,QAKpBH,OAAO,CAAC,KAAD,CAAP,CALoB,wDAAH,kBAAfS,CAAAA,eAAe,2CAArB,CAOA,mBACI,yBACCZ,QAAQ,cACL,eAAQ,SAAS,WAAKJ,MAAM,CAACiB,GAAZ,aAAmBjB,MAAM,CAACkB,YAA1B,CAAjB,CAA2D,OAAO,CAAEF,eAApE,wBADK,cAGL,eAAQ,SAAS,WAAKhB,MAAM,CAACiB,GAAZ,aAAmBjB,MAAM,CAACmB,UAA1B,CAAjB,CAAyD,OAAO,CAAEJ,aAAlE,sBAJJ,EADJ,CAQH,CAvCD,CAyCA,cAAed,CAAAA,SAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport { follow, unfollow } from '../../store/actions/profileAction'\r\n\r\nimport styles from './FollowBtn.module.css'\r\n\r\nconst FollowBtn = ({user}) => {\r\n    const dispatch = useDispatch()\r\n\r\n    const [followed, setFollowed] = useState(false)\r\n    const [load, setLoad] = useState(false)\r\n\r\n    const {auth, socket} = useSelector(state=>state)\r\n\r\n    useEffect(()=>{\r\n        if(auth.user.following.find(item => item._id === user._id)){\r\n            setFollowed(true)\r\n        }\r\n        else return () => setFollowed(false)\r\n    \r\n    },[auth.user.following, user._id])\r\n\r\n    const followHandler = async () => {\r\n        if(load) return\r\n        setLoad(true)\r\n        setFollowed(true)\r\n        await dispatch(follow(auth, user, socket))\r\n        setLoad(false)\r\n    }\r\n\r\n    const unfollowHandler = async () => {\r\n        if(load) return\r\n        setLoad(true)\r\n        setFollowed(false)\r\n        await dispatch(unfollow(auth, user, socket))\r\n        setLoad(false)\r\n    }\r\n    return (\r\n        <>\r\n        {followed ? \r\n            <button className={`${styles.btn} ${styles.unfollow_btn}`} onClick={unfollowHandler} > Unfollow </button>\r\n            :\r\n            <button className={`${styles.btn} ${styles.follow_btn}`} onClick={followHandler} > Follow </button>}\r\n        </>     \r\n    )\r\n}\r\n\r\nexport default FollowBtn\r\n"]},"metadata":{},"sourceType":"module"}