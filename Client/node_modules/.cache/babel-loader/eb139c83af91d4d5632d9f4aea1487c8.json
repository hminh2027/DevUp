{"ast":null,"code":"import _defineProperty from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{AiOutlineCamera}from'react-icons/ai';import{BsCardImage}from'react-icons/bs';import{checkImage}from'../../apis/Cloudinary';import{updateUser}from'../../store/actions/profileAction';import TextareaAutosize from'react-textarea-autosize';import Cropper from'../util/Cropper';import styles from'./EditProfileModal.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProfileModal=function EditProfileModal(_ref){var setIsEdit=_ref.setIsEdit;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),cropImage=_useState2[0],setCropImage=_useState2[1];var _useState3=useState({avatar:'',background:''}),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState({username:auth.user.username,tel:auth.user.tel,gender:auth.user.gender,address:auth.user.address,bio:auth.user.bio,avatar:auth.user.avatar,background:auth.user.background}),_useState6=_slicedToArray(_useState5,2),form=_useState6[0],setForm=_useState6[1];useEffect(function(){if(form.gender==='male')document.getElementById('gender1').checked=true;else if(form.gender==='female')document.getElementById('gender2').checked=true;else if(form.gender==='others')document.getElementById('gender3').checked=true;},[form.gender]);var inputChangeHandler=function inputChangeHandler(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var imageChangeHandler=function imageChangeHandler(e){var file=e.target.files[0];var err=checkImage(file);if(err)return dispatch({type:'ALERT',payload:{error:err}});setImage(_objectSpread(_objectSpread({},image),{},_defineProperty({},e.target.name,file)));};var cropImageHandler=function cropImageHandler(e){var file=e.target.files[0];var err=checkImage(file);if(err)return dispatch({type:'ALERT',payload:{error:err}});setCropImage(file);};var closeModal=function closeModal(){dispatch({type:'MODAL',payload:false});setIsEdit(false);};var submitHandler=function submitHandler(){dispatch(updateUser(auth,form,image));dispatch({type:'MODAL',payload:false});setIsEdit(false);};return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[cropImage&&/*#__PURE__*/_jsx(Cropper,{setCropImage:setCropImage,setImage:setImage,src:cropImage}),/*#__PURE__*/_jsx(\"div\",{className:styles.heading,children:\"Edit Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.body,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.section,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.title,children:\"Avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.avatar_wrapper,children:[/*#__PURE__*/_jsx(\"img\",{src:image.avatar?URL.createObjectURL(image.avatar):form.avatar,alt:\"avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.change_avatar,children:[\"Change Avatar\",/*#__PURE__*/_jsx(AiOutlineCamera,{}),/*#__PURE__*/_jsx(\"input\",{onChange:cropImageHandler,className:styles.input_img,type:\"file\",name:\"avatar\",accept:\"image/*\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.section,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.title,children:\"Background\"}),/*#__PURE__*/_jsx(\"div\",{style:{backgroundImage:\"url('\".concat(image.background?URL.createObjectURL(image.background):form.background,\"')\")},className:styles.background_wrapper,children:/*#__PURE__*/_jsx(\"div\",{className:styles.change_bg,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.change_wrapper,children:[\"Change Background\",/*#__PURE__*/_jsx(BsCardImage,{}),/*#__PURE__*/_jsx(\"input\",{onChange:imageChangeHandler,className:styles.input_img,type:\"file\",name:\"background\",accept:\"image/*\"})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.section,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.title,children:\"Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.form_wrapper,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.input_wrapper,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{onChange:inputChangeHandler,id:\"username\",className:styles.input,value:form.username,type:\"text\",spellCheck:\"false\",name:\"username\",placeholder:\"Username...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input_wrapper,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"gender\",children:\"Gender:\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.group_radio_btn,children:[/*#__PURE__*/_jsx(\"label\",{className:styles.radio_label,htmlFor:\"gender1\",children:\"Male:\"}),/*#__PURE__*/_jsx(\"input\",{onChange:inputChangeHandler,id:\"gender1\",className:styles.input,value:\"male\",type:\"radio\",spellCheck:\"false\",name:\"gender\"}),/*#__PURE__*/_jsx(\"label\",{className:styles.radio_label,htmlFor:\"gender2\",children:\"Female:\"}),/*#__PURE__*/_jsx(\"input\",{onChange:inputChangeHandler,id:\"gender2\",className:styles.input,value:\"female\",type:\"radio\",spellCheck:\"false\",name:\"gender\"}),/*#__PURE__*/_jsx(\"label\",{className:styles.radio_label,htmlFor:\"gender3\",children:\"Others:\"}),/*#__PURE__*/_jsx(\"input\",{onChange:inputChangeHandler,id:\"gender3\",className:styles.input,value:\"others\",type:\"radio\",spellCheck:\"false\",name:\"gender\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input_wrapper,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tel\",children:\"Phone:\"}),/*#__PURE__*/_jsx(\"input\",{onChange:inputChangeHandler,id:\"tel\",className:styles.input,value:form.tel,type:\"tel\",spellCheck:\"false\",name:\"tel\",placeholder:\"Phone...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input_wrapper,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address\",children:\"Address:\"}),/*#__PURE__*/_jsx(\"input\",{onChange:inputChangeHandler,id:\"address\",className:styles.input,value:form.address,type:\"text\",spellCheck:\"false\",name:\"address\",placeholder:\"Address...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.textarea_wrapper,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"bio\",children:\"Bios:\"}),/*#__PURE__*/_jsx(TextareaAutosize,{minRows:\"2\",maxRows:\"4\",value:form.bio,id:\"bio\",name:\"bio\",spellCheck:\"false\",onChange:inputChangeHandler,className:styles.textarea,placeholder:\"Tell people something about you...\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.footer,children:[/*#__PURE__*/_jsx(\"div\",{onClick:closeModal,className:\"\".concat(styles.cancel,\" \").concat(styles.btn),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"div\",{onClick:submitHandler,className:\"\".concat(styles.submit,\" \").concat(styles.btn),children:\"Submit\"})]})]});};export default EditProfileModal;","map":{"version":3,"sources":["D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/src/components/modal/EditProfileModal.js"],"names":["React","useEffect","useState","useDispatch","useSelector","AiOutlineCamera","BsCardImage","checkImage","updateUser","TextareaAutosize","Cropper","styles","EditProfileModal","setIsEdit","dispatch","state","auth","cropImage","setCropImage","avatar","background","image","setImage","username","user","tel","gender","address","bio","form","setForm","document","getElementById","checked","inputChangeHandler","e","target","name","value","imageChangeHandler","file","files","err","type","payload","error","cropImageHandler","closeModal","submitHandler","container","heading","body","section","title","avatar_wrapper","URL","createObjectURL","change_avatar","input_img","backgroundImage","background_wrapper","change_bg","change_wrapper","form_wrapper","input_wrapper","input","group_radio_btn","radio_label","textarea_wrapper","textarea","footer","cancel","btn","submit"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport {AiOutlineCamera} from 'react-icons/ai'\r\nimport {BsCardImage} from 'react-icons/bs'\r\n\r\nimport {checkImage} from '../../apis/Cloudinary'\r\nimport { updateUser } from '../../store/actions/profileAction'\r\n\r\nimport TextareaAutosize from 'react-textarea-autosize'\r\nimport Cropper from '../util/Cropper'\r\n\r\nimport styles from './EditProfileModal.module.css'\r\n\r\nconst EditProfileModal = ({setIsEdit}) => {\r\n    const dispatch = useDispatch()\r\n\r\n    const {auth} = useSelector(state=>state)\r\n\r\n    const [cropImage, setCropImage] = useState(null)\r\n\r\n    const [image, setImage] = useState({\r\n        avatar: '',\r\n        background: ''\r\n    })\r\n\r\n    const [form, setForm] = useState({\r\n        username: auth.user.username,\r\n        tel: auth.user.tel,\r\n        gender: auth.user.gender,\r\n        address: auth.user.address,\r\n        bio: auth.user.bio,\r\n        avatar: auth.user.avatar,\r\n        background: auth.user.background\r\n    })\r\n\r\n    useEffect(()=>{\r\n        if(form.gender === 'male') document.getElementById('gender1').checked=true;\r\n        else if(form.gender === 'female') document.getElementById('gender2').checked=true;\r\n        else if(form.gender === 'others') document.getElementById('gender3').checked=true;\r\n    },[form.gender])\r\n\r\n    const inputChangeHandler = e => {\r\n        setForm({\r\n            ...form,\r\n            [e.target.name] :e.target.value\r\n        })\r\n    }\r\n\r\n    const imageChangeHandler = e => {\r\n        const file = e.target.files[0];\r\n        const err = checkImage(file);\r\n        if(err) return dispatch({type: 'ALERT' , payload: {error: err}});\r\n        setImage({...image,[e.target.name]: file});\r\n    }\r\n\r\n    const cropImageHandler = e => {\r\n        const file = e.target.files[0];\r\n        const err = checkImage(file);\r\n        if(err) return dispatch({type: 'ALERT' , payload: {error: err}});\r\n        setCropImage(file);\r\n    }\r\n\r\n    const closeModal = () => {\r\n        dispatch({type: 'MODAL', payload: false});\r\n        setIsEdit(false);\r\n    }\r\n\r\n    const submitHandler = () => {\r\n        dispatch(updateUser(auth, form, image));\r\n        dispatch({type: 'MODAL', payload: false});\r\n        setIsEdit(false);\r\n    }\r\n    \r\n    return (\r\n        <div className={styles.container}>\r\n            {cropImage && <Cropper setCropImage={setCropImage} setImage={setImage} src={cropImage} />}        \r\n            <div className={styles.heading}>Edit Profile</div>\r\n            <div className={styles.body}>\r\n                {/* avatar */}\r\n                <div className={styles.section}>\r\n                    <div className={styles.title}>Avatar</div>\r\n                    <div className={styles.avatar_wrapper}>\r\n                        <img src={image.avatar ? URL.createObjectURL(image.avatar) : form.avatar} alt='avatar' />\r\n                        <div className={styles.change_avatar}>\r\n                            Change Avatar\r\n                            <AiOutlineCamera/>\r\n                            <input onChange={cropImageHandler} className={styles.input_img} type=\"file\" name=\"avatar\" accept=\"image/*\" />\r\n                        </div>\r\n                    </div>\r\n                    \r\n                </div>\r\n                {/* background */}\r\n                <div className={styles.section}>\r\n                    <div className={styles.title}>Background</div>\r\n                    <div style={{backgroundImage: `url('${image.background ? URL.createObjectURL(image.background) : form.background}')`}} className={styles.background_wrapper}>\r\n                        <div className={styles.change_bg}>\r\n                            <div className={styles.change_wrapper}>\r\n                                Change Background\r\n                                <BsCardImage/>\r\n                                <input onChange={imageChangeHandler} className={styles.input_img} type=\"file\" name=\"background\" accept=\"image/*\" />\r\n                            </div>                      \r\n                        </div>\r\n                    </div>      \r\n                </div>\r\n                {/* form */}\r\n                <div className={styles.section}>\r\n                    <div className={styles.title}>Information</div>\r\n                    <div className={styles.form_wrapper}>\r\n                        <div className={styles.input_wrapper}>\r\n                            <label htmlFor=\"username\">Username:</label>\r\n                            <input onChange={inputChangeHandler} id='username' className={styles.input} value={form.username} type=\"text\" spellCheck=\"false\" name=\"username\" placeholder=\"Username...\" />\r\n                        </div>\r\n                        <div className={styles.input_wrapper}>\r\n                            <label htmlFor=\"gender\">Gender:</label>\r\n                            <div className={styles.group_radio_btn}>\r\n                                <label className={styles.radio_label} htmlFor=\"gender1\">Male:</label>\r\n                                <input onChange={inputChangeHandler} id='gender1'  className={styles.input} value='male' type=\"radio\" spellCheck=\"false\" name=\"gender\" />\r\n                                <label className={styles.radio_label} htmlFor=\"gender2\">Female:</label>\r\n                                <input onChange={inputChangeHandler} id='gender2' className={styles.input} value='female' type=\"radio\" spellCheck=\"false\" name=\"gender\" />\r\n                                <label className={styles.radio_label} htmlFor=\"gender3\">Others:</label>\r\n                                <input onChange={inputChangeHandler} id='gender3' className={styles.input} value='others' type=\"radio\" spellCheck=\"false\" name=\"gender\" />\r\n                            </div>\r\n                        </div>\r\n                        <div className={styles.input_wrapper}>\r\n                            <label htmlFor=\"tel\">Phone:</label>\r\n                            <input onChange={inputChangeHandler} id='tel' className={styles.input} value={form.tel} type=\"tel\" spellCheck=\"false\" name=\"tel\" placeholder=\"Phone...\" />\r\n                        </div>\r\n                        <div className={styles.input_wrapper}>\r\n                            <label htmlFor=\"address\">Address:</label>\r\n                            <input onChange={inputChangeHandler} id='address' className={styles.input} value={form.address} type=\"text\" spellCheck=\"false\" name=\"address\" placeholder=\"Address...\" />\r\n                        </div>\r\n                        <div className={styles.textarea_wrapper}>\r\n                            <label htmlFor=\"bio\">Bios:</label>\r\n                            <TextareaAutosize minRows='2' maxRows='4' value={form.bio} id='bio' name='bio' spellCheck='false' onChange={inputChangeHandler} className={styles.textarea} placeholder='Tell people something about you...' />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className={styles.footer}>\r\n                <div onClick={closeModal} className={`${styles.cancel} ${styles.btn}`}>Cancel</div>\r\n                <div onClick={submitHandler} className={`${styles.submit} ${styles.btn}`}>Submit</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditProfileModal"]},"metadata":{},"sourceType":"module"}