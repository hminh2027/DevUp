{"ast":null,"code":"import _slicedToArray from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{useHistory}from'react-router';import{deletePost,savePost,unsavePost}from'../../store/actions/postAction';import{BsBookmarkPlus,BsBookmarkDash}from'react-icons/bs';import{RiDeleteBinLine,RiEditLine}from'react-icons/ri';import DropdownCard from'../util/DropdownCard';import styles from'./PostOption.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostOption=function PostOption(_ref){var setIsEdit=_ref.setIsEdit,post=_ref.post,isShow=_ref.isShow,setIsShow=_ref.setIsShow;var dispatch=useDispatch();var history=useHistory();var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isMe=_useState2[0],setIsMe=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSaved=_useState4[0],setIsSaved=_useState4[1];useEffect(function(){if(auth.user._id===post.user._id)setIsMe(true);else setIsMe(false);},[auth.user._id,post.user._id]);useEffect(function(){if(auth.user.saved.find(function(p){return p._id==post._id;}))setIsSaved(true);else setIsSaved(false);},[auth.user.saved]);var deleteHander=function deleteHander(){dispatch(deletePost(auth,post._id));history.replace('/');};var saveHander=function saveHander(){isSaved?dispatch(unsavePost(auth,post._id)):dispatch(savePost(auth,post._id));};return/*#__PURE__*/_jsxs(DropdownCard,{isShow:isShow,setIsShow:setIsShow,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.option_item,onClick:saveHander,children:[isSaved?/*#__PURE__*/_jsx(BsBookmarkDash,{className:styles.icon}):/*#__PURE__*/_jsx(BsBookmarkPlus,{className:styles.icon}),/*#__PURE__*/_jsx(\"div\",{className:styles.text,children:isSaved?'Unsave':'Save'})]}),isMe&&/*#__PURE__*/_jsxs(\"div\",{className:styles.option_item,onClick:function onClick(){return setIsEdit(true);},children:[/*#__PURE__*/_jsx(RiEditLine,{className:styles.icon}),/*#__PURE__*/_jsx(\"div\",{className:styles.text,children:\"Edit\"})]}),isMe&&/*#__PURE__*/_jsxs(\"div\",{className:styles.option_item,onClick:deleteHander,children:[/*#__PURE__*/_jsx(RiDeleteBinLine,{className:styles.icon}),/*#__PURE__*/_jsx(\"div\",{className:styles.text,children:\"Delete\"})]})]});};export default PostOption;","map":{"version":3,"sources":["D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/src/components/post/PostOption.js"],"names":["React","useState","useEffect","useDispatch","useSelector","useHistory","deletePost","savePost","unsavePost","BsBookmarkPlus","BsBookmarkDash","RiDeleteBinLine","RiEditLine","DropdownCard","styles","PostOption","setIsEdit","post","isShow","setIsShow","dispatch","history","state","auth","isMe","setIsMe","isSaved","setIsSaved","user","_id","saved","find","p","deleteHander","replace","saveHander","option_item","icon","text"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router'\r\n\r\nimport { deletePost, savePost, unsavePost } from '../../store/actions/postAction'\r\n\r\nimport {BsBookmarkPlus, BsBookmarkDash} from 'react-icons/bs'\r\nimport {RiDeleteBinLine, RiEditLine} from 'react-icons/ri'\r\n\r\nimport DropdownCard from '../util/DropdownCard'\r\n\r\nimport styles from './PostOption.module.css'\r\n\r\nconst PostOption = ({setIsEdit, post, isShow, setIsShow}) => {\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n\r\n    const {auth} = useSelector(state=>state)\r\n\r\n    const [isMe, setIsMe] = useState(false)\r\n    const [isSaved, setIsSaved] = useState(false)\r\n\r\n    useEffect(()=>{\r\n        if(auth.user._id === post.user._id) setIsMe(true)\r\n        else setIsMe(false)\r\n\r\n    },[auth.user._id, post.user._id])\r\n\r\n    useEffect(() => {\r\n        if(auth.user.saved.find(p=>p._id == post._id)) setIsSaved(true)\r\n        else setIsSaved(false)\r\n\r\n    }, [auth.user.saved])\r\n\r\n    const deleteHander = () => {\r\n        dispatch(deletePost(auth, post._id))\r\n        history.replace('/')\r\n    }\r\n\r\n    const saveHander = () => {\r\n        isSaved ? dispatch(unsavePost(auth, post._id)) : dispatch(savePost(auth, post._id))\r\n    }\r\n\r\n    return (\r\n        <DropdownCard isShow={isShow} setIsShow={setIsShow}>\r\n            <div className={styles.option_item} onClick={saveHander} >\r\n                {isSaved ? <BsBookmarkDash className={styles.icon}/> : <BsBookmarkPlus className={styles.icon}/>}\r\n                <div className={styles.text}>{isSaved ? 'Unsave' : 'Save'}</div>\r\n            </div>\r\n            {isMe && \r\n            <div className={styles.option_item} onClick={()=>setIsEdit(true)}>\r\n                <RiEditLine className={styles.icon}/>\r\n                <div className={styles.text}>Edit</div>\r\n            </div>\r\n            }\r\n            {isMe && \r\n            <div className={styles.option_item} onClick={deleteHander} >\r\n                <RiDeleteBinLine className={styles.icon}/>\r\n                <div className={styles.text}>Delete</div>\r\n            </div>\r\n            } \r\n        </DropdownCard>       \r\n    )\r\n}\r\n\r\nexport default PostOption\r\n"]},"metadata":{},"sourceType":"module"}