{"ast":null,"code":"import { postAPI, deleteAPI, getAPI, patchAPI } from '../../apis/Axios';\nexport const createNotice = (auth, msg, socket) => async dispatch => {\n  try {\n    const res = await postAPI(`notice`, msg, auth.token);\n    socket.emit('createNotice', { ...res.data.notice,\n      user: {\n        username: auth.user.username,\n        avatar: auth.user.avatar\n      }\n    });\n  } catch (err) {\n    dispatch({\n      type: 'ALERT',\n      payload: err.response.data.msg\n    });\n  }\n};\nexport const deleteNotice = (...args) => async dispatch => {\n  const auth = args[0];\n  const msg = args[1];\n  let notices = [];\n  if (args.length == 3) notices = args[2];\n\n  try {\n    if (msg.id) await deleteAPI(`notice/${msg.id}?url=${msg.url}`, auth.token);else await deleteAPI(`notice/postDelete?url=${msg.url}`, auth.token);\n    if (notices.length <= 0) return;\n    let newNotices = notices.filter(n => n.id !== msg.id);\n    dispatch({\n      type: 'DELETE_NOTICE',\n      payload: newNotices\n    });\n  } catch (err) {\n    dispatch({\n      type: 'ALERT',\n      payload: err.response.data.msg\n    });\n  }\n};\nexport const deleteNotices = auth => async dispatch => {\n  try {\n    const res = await deleteAPI(`notice`, auth.token);\n    dispatch({\n      type: 'DELETE_NOTICE',\n      payload: []\n    });\n  } catch (err) {\n    dispatch({\n      type: 'ALERT',\n      payload: err.response.data.msg\n    });\n  }\n};\nexport const unreadNotice = (auth, msg, notices) => async dispatch => {\n  try {\n    const res = await patchAPI(`notice/unread/${msg.id}`, null, auth.token);\n    const newNotices = notices.map(n => n.id === res.data.notice.id ? res.data.notice : n);\n    dispatch({\n      type: 'UPDATE_NOTICE',\n      payload: newNotices\n    });\n  } catch (err) {\n    dispatch({\n      type: 'ALERT',\n      payload: err.response.data.msg\n    });\n  }\n};\nexport const readNotice = (auth, msg, notices) => async dispatch => {\n  try {\n    const res = await patchAPI(`notice/${msg.id}`, null, auth.token);\n    const newNotices = notices.map(n => n.id === res.data.notice.id ? res.data.notice : n);\n    dispatch({\n      type: 'UPDATE_NOTICE',\n      payload: newNotices\n    });\n  } catch (err) {\n    dispatch({\n      type: 'ALERT',\n      payload: err.response.data.msg\n    });\n  }\n};\nexport const readNotices = auth => async dispatch => {\n  try {\n    const res = await patchAPI('notice', null, auth.token);\n  } catch (err) {\n    dispatch({\n      type: 'ALERT',\n      payload: err.response.data.msg\n    });\n  }\n};\nexport const getNotices = auth => async dispatch => {\n  try {\n    const res = await getAPI(`notice`, auth.token);\n    dispatch({\n      type: 'GET_NOTICES',\n      payload: res.data.notices\n    });\n  } catch (err) {\n    dispatch({\n      type: 'ALERT',\n      payload: err.response.data\n    });\n  }\n};","map":{"version":3,"sources":["D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/client/src/store/actions/noticeAction.js"],"names":["postAPI","deleteAPI","getAPI","patchAPI","createNotice","auth","msg","socket","dispatch","res","token","emit","data","notice","user","username","avatar","err","type","payload","response","deleteNotice","args","notices","length","id","url","newNotices","filter","n","deleteNotices","unreadNotice","map","readNotice","readNotices","getNotices"],"mappings":"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","sourcesContent":["import {postAPI, deleteAPI, getAPI, patchAPI} from '../../apis/Axios'\r\n\r\nexport const createNotice = (auth, msg, socket) => async (dispatch) => {\r\n  try {\r\n    const res = await postAPI(`notice`, msg, auth.token);\r\n\r\n    socket.emit('createNotice', {\r\n      ...res.data.notice,\r\n      user: {\r\n        username: auth.user.username,\r\n        avatar: auth.user.avatar\r\n      }\r\n    })\r\n\r\n  }   catch (err) {\r\n      dispatch({type: 'ALERT', payload: err.response.data.msg});\r\n  }\r\n}\r\n\r\nexport const deleteNotice = (...args) => async (dispatch) => {\r\n  const auth = args[0];\r\n  const msg = args[1];\r\n  let notices = [];\r\n  if(args.length==3) notices = args[2];\r\n\r\n  try {\r\n    if(msg.id) await deleteAPI(`notice/${msg.id}?url=${msg.url}`, auth.token);\r\n    else await deleteAPI(`notice/postDelete?url=${msg.url}`, auth.token);\r\n\r\n    if(notices.length <= 0) return;\r\n    let newNotices = notices.filter(n=>n.id!==msg.id);\r\n    \r\n    dispatch({type: 'DELETE_NOTICE', payload: newNotices});\r\n\r\n\r\n  } catch(err) {\r\n    dispatch({type: 'ALERT', payload: err.response.data.msg});\r\n  }\r\n}\r\n\r\nexport const deleteNotices = (auth) => async (dispatch) => {\r\n  try {\r\n    const res = await deleteAPI(`notice`, auth.token);\r\n    dispatch({type: 'DELETE_NOTICE', payload: []});\r\n\r\n  } catch(err) {\r\n    dispatch({type: 'ALERT', payload: err.response.data.msg});\r\n  }\r\n}\r\n\r\nexport const unreadNotice = (auth, msg, notices) => async (dispatch) => {\r\n  try {\r\n    const res = await patchAPI(`notice/unread/${msg.id}`, null, auth.token);\r\n\r\n    const newNotices = notices.map(n=>n.id===res.data.notice.id?res.data.notice:n);\r\n    \r\n    dispatch({type: 'UPDATE_NOTICE' , payload: newNotices});\r\n\r\n  } catch(err) {\r\n    dispatch({type: 'ALERT', payload: err.response.data.msg});\r\n  }\r\n}\r\n\r\nexport const readNotice = (auth, msg, notices) => async (dispatch) => {\r\n  try {\r\n    const res = await patchAPI(`notice/${msg.id}`, null, auth.token);\r\n\r\n    const newNotices = notices.map(n=>n.id===res.data.notice.id?res.data.notice:n);\r\n    \r\n    dispatch({type: 'UPDATE_NOTICE' , payload: newNotices});\r\n\r\n  } catch(err) {\r\n    dispatch({type: 'ALERT', payload: err.response.data.msg});\r\n  }\r\n}\r\n\r\nexport const readNotices = (auth) => async (dispatch) => {\r\n  try {\r\n    const res = await patchAPI('notice', null, auth.token);\r\n\r\n\r\n  } catch(err) {\r\n    dispatch({type: 'ALERT', payload: err.response.data.msg});\r\n  }\r\n}\r\n\r\nexport const getNotices = (auth) => async (dispatch) => {\r\n  try {\r\n    const res = await getAPI(`notice`, auth.token);\r\n    dispatch({type: 'GET_NOTICES' , payload: res.data.notices})\r\n\r\n  } catch(err) {\r\n    dispatch({type: 'ALERT', payload: err.response.data})\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}