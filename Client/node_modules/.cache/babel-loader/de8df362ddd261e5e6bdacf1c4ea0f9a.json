{"ast":null,"code":"import _regeneratorRuntime from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{SiHtml5,SiCsswizardry,SiJavascript}from'react-icons/si';import Editor from'./sourceCode/Editor';import{editableProject,saveProject}from'../../store/actions/projectAction';import styles from'./SourceCode.module.css';import CodeFrame from'./sourceCode/CodeFrame';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SourceCode=function SourceCode(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,project=_useSelector.project;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSave=_useState4[0],setIsSave=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isAutoSave=_useState6[0],setAutoSave=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),html=_useState8[0],setHtml=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),css=_useState10[0],setCss=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),js=_useState12[0],setJs=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),srcDoc=_useState14[0],setSrcDoc=_useState14[1];useEffect(function(){if(!project.project)return;setHtml(project.project.html);setCss(project.project.css);setJs(project.project.js);setSrcDoc(project.project.code);},[project.project]);useEffect(function(){if(!isSave||!project.project.isEditable)return;var body={code:srcDoc,html:html,css:css,js:js};dispatch(saveProject(auth,body,project.project._id));setIsSave(false);},[isSave]);useEffect(function(){if(!isAutoSave)return;var timeout=setTimeout(function(){setSrcDoc(\"\\n            <html>\\n              <body>\".concat(html,\"</body>\\n              <style>\").concat(css,\"</style>\\n              <script>\").concat(js,\"</script>\\n            </html>\\n          \"));},500);return function(){return clearTimeout(timeout);};},[html,css,js,isAutoSave]);var changeEditablehandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!isLoading){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setIsLoading(true);_context.next=5;return dispatch(editableProject(auth,project.project._id));case 5:setIsLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function changeEditablehandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.heading,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.infor,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.title,children:project.project.name}),/*#__PURE__*/_jsx(\"div\",{className:styles.name,children:/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(project.project.author._id),children:project.project.author.username})}),project.project.isEditable?/*#__PURE__*/_jsx(\"div\",{style:{color:'#48bf91'},className:styles.editable,children:\"(Editable)\"}):/*#__PURE__*/_jsx(\"div\",{style:{color:'#ff4242'},className:styles.editable,children:\"(Non-Editable)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.group_btn,children:[project.project.author._id===auth.user._id&&/*#__PURE__*/_jsxs(\"div\",{onClick:changeEditablehandler,className:styles.btn_wrapper,children:[\"Editable: \",project.project.isEditable?'On':'Off']}),/*#__PURE__*/_jsx(\"div\",{style:{cursor:\"\".concat(project.project.isEditable?'pointer':'not-allowed')},onClick:function onClick(){return setIsSave(true);},className:styles.btn_wrapper,children:\"Save Online\"}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setAutoSave(!isAutoSave);},className:\"\".concat(styles.btn_wrapper,\" \").concat(isAutoSave?styles.autosave:''),children:\"Autosave\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.editors,children:[/*#__PURE__*/_jsx(Editor,{language:\"xml\",name:\"HTML\",value:html,onChange:setHtml,labelColor:\"#d94924\",icon:/*#__PURE__*/_jsx(SiHtml5,{})}),/*#__PURE__*/_jsx(Editor,{language:\"css\",name:\"CSS\",value:css,onChange:setCss,labelColor:\"#5bb7ed\",icon:/*#__PURE__*/_jsx(SiCsswizardry,{})}),/*#__PURE__*/_jsx(Editor,{language:\"javascript\",name:\"JS\",value:js,onChange:setJs,labelColor:\"#e4d04b\",icon:/*#__PURE__*/_jsx(SiJavascript,{})})]}),/*#__PURE__*/_jsx(CodeFrame,{srcDoc:srcDoc})]});};export default SourceCode;","map":{"version":3,"sources":["D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/src/components/code/SourceCode.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Link","SiHtml5","SiCsswizardry","SiJavascript","Editor","editableProject","saveProject","styles","CodeFrame","SourceCode","dispatch","state","auth","project","isLoading","setIsLoading","isSave","setIsSave","isAutoSave","setAutoSave","html","setHtml","css","setCss","js","setJs","srcDoc","setSrcDoc","code","isEditable","body","_id","timeout","setTimeout","clearTimeout","changeEditablehandler","container","heading","infor","title","name","author","username","color","editable","group_btn","user","btn_wrapper","cursor","autosave","editors"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport {SiHtml5, SiCsswizardry, SiJavascript} from 'react-icons/si'\r\n\r\nimport Editor from './sourceCode/Editor'\r\n\r\nimport { editableProject, saveProject } from '../../store/actions/projectAction'\r\n\r\nimport styles from './SourceCode.module.css'\r\nimport CodeFrame from './sourceCode/CodeFrame'\r\n\r\nconst SourceCode = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    const {auth, project} = useSelector(state=>state)\r\n\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [isSave, setIsSave] = useState(false)\r\n    const [isAutoSave, setAutoSave] = useState(true)\r\n\r\n    const [html, setHtml] = useState('')\r\n    const [css, setCss] = useState('')\r\n    const [js, setJs] = useState('')\r\n    const [srcDoc, setSrcDoc] = useState('')\r\n\r\n    useEffect(() => {\r\n        if(!project.project) return;\r\n        setHtml(project.project.html)\r\n        setCss(project.project.css)\r\n        setJs(project.project.js)\r\n        setSrcDoc(project.project.code)\r\n\r\n    },[project.project])\r\n\r\n    useEffect(()=>{\r\n        if(!isSave || !project.project.isEditable) return;\r\n\r\n        let body = {code: srcDoc, html, css, js}\r\n\r\n        dispatch(saveProject(auth, body, project.project._id))\r\n        setIsSave(false)\r\n\r\n    },[isSave])\r\n\r\n    useEffect(() => {\r\n        if(!isAutoSave) return;\r\n        const timeout = setTimeout(() => {\r\n          setSrcDoc(`\r\n            <html>\r\n              <body>${html}</body>\r\n              <style>${css}</style>\r\n              <script>${js}</script>\r\n            </html>\r\n          `)\r\n        }, 500)\r\n        return () => clearTimeout(timeout)\r\n    }, [html, css, js, isAutoSave])\r\n\r\n    const changeEditablehandler = async () => {\r\n        if(isLoading) return;\r\n        setIsLoading(true)\r\n        await dispatch(editableProject(auth, project.project._id))\r\n        setIsLoading(false)\r\n    }\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.heading}>\r\n                <div className={styles.infor}>\r\n                    <div className={styles.title}>{project.project.name}</div>\r\n                    <div className={styles.name}><Link to={`/profile/${project.project.author._id}`}>{project.project.author.username}</Link></div>\r\n                    {project.project.isEditable ? <div style={{color: '#48bf91'}} className={styles.editable}>(Editable)</div> : <div style={{color: '#ff4242'}} className={styles.editable}>(Non-Editable)</div>}\r\n                </div>\r\n                <div className={styles.group_btn}>\r\n                    {project.project.author._id===auth.user._id && \r\n                    (<div onClick={changeEditablehandler} className={styles.btn_wrapper}>\r\n                        Editable: {project.project.isEditable?'On':'Off'}\r\n                    </div>)}\r\n                    <div style={{cursor: `${project.project.isEditable?'pointer':'not-allowed'}`}} onClick={()=>setIsSave(true)} className={styles.btn_wrapper}>Save Online</div>\r\n                    <div onClick={()=>setAutoSave(!isAutoSave)} className={`${styles.btn_wrapper} ${isAutoSave?styles.autosave:''}`}>Autosave</div>\r\n                </div>\r\n            </div>\r\n            <div className={styles.editors}>\r\n                <Editor\r\n                language=\"xml\"\r\n                name=\"HTML\"\r\n                value={html}\r\n                onChange={setHtml}\r\n                labelColor='#d94924'\r\n                icon={<SiHtml5 />}\r\n                />\r\n                \r\n                <Editor\r\n                language=\"css\"\r\n                name=\"CSS\"\r\n                value={css}\r\n                onChange={setCss}\r\n                labelColor='#5bb7ed'\r\n                icon={<SiCsswizardry/>}\r\n                />\r\n\r\n                <Editor\r\n                language=\"javascript\"\r\n                name=\"JS\"\r\n                value={js}\r\n                onChange={setJs}\r\n                labelColor='#e4d04b'\r\n                icon={<SiJavascript/>}\r\n                />\r\n            </div>\r\n            <CodeFrame srcDoc={srcDoc} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SourceCode"]},"metadata":{},"sourceType":"module"}