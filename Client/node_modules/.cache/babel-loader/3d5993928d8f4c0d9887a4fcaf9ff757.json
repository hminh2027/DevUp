{"ast":null,"code":"import _regeneratorRuntime from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import ReactDOM from'react-dom';import{useDispatch,useSelector}from'react-redux';import{useMediaQuery}from'react-responsive';import{deleteProject,deleteReceivedProject,openProject}from'../../../store/actions/projectAction';import{AiOutlineEdit,AiOutlineShareAlt,AiOutlineDelete}from'react-icons/ai';import{MdOpenInNew}from'react-icons/md';import{GoPrimitiveDot}from'react-icons/go';import Modal from'../../util/Modal';import EditProjectModal from'../../modal/EditProjectModal';import ShareProjectModal from'../../modal/ShareProjectModal';import styles from'./ProjectCard.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProjectCard=function ProjectCard(_ref){var project=_ref.project;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var isDesktop=useMediaQuery({query:'(min-width: 1224px)'});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isShowEditModal=_useState2[0],setShowEditModal=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isShowShareModal=_useState4[0],setShowShareModal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isReceived=_useState6[0],setisReceived=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];useEffect(function(){project.receivers.find(function(r){return r._id==auth.user._id;})&&setisReceived(true);},[auth.user._id,project.receivers]);var editHandler=function editHandler(){dispatch({type:'MODAL',payload:true});setShowEditModal(true);};var shareHandler=function shareHandler(){dispatch({type:'MODAL',payload:true});setShowShareModal(true);};var openHandler=function openHandler(){dispatch(openProject(project));};var deleteOwnProjectHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!loading){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoading(true);_context.next=5;return dispatch(deleteProject(auth,project._id));case 5:setLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function deleteOwnProjectHandler(){return _ref2.apply(this,arguments);};}();var deleteReceivedProjectHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!loading){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setLoading(true);_context2.next=5;return dispatch(deleteReceivedProject(auth,project._id));case 5:setLoading(false);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteReceivedProjectHandler(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundImage:\"url(\".concat(project.author.avatar,\")\")},className:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{onClick:openHandler,className:styles.open,children:/*#__PURE__*/_jsx(MdOpenInNew,{})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.content,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.infor,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.name,children:project.name}),/*#__PURE__*/_jsxs(\"div\",{className:styles.author,children:[\"Author: \",project.author.username]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.btn_group,children:[!isReceived&&/*#__PURE__*/_jsx(\"div\",{onClick:editHandler,className:styles.icon_wrapper,children:/*#__PURE__*/_jsx(AiOutlineEdit,{})}),isReceived?/*#__PURE__*/_jsx(\"div\",{onClick:deleteReceivedProjectHandler,className:styles.icon_wrapper,children:/*#__PURE__*/_jsx(AiOutlineDelete,{})}):/*#__PURE__*/_jsx(\"div\",{onClick:deleteOwnProjectHandler,className:styles.icon_wrapper,children:/*#__PURE__*/_jsx(AiOutlineDelete,{})}),!isReceived&&/*#__PURE__*/_jsx(\"div\",{onClick:shareHandler,className:styles.icon_wrapper,children:/*#__PURE__*/_jsx(AiOutlineShareAlt,{})})]})]}),!project.isRead&&/*#__PURE__*/_jsx(\"div\",{className:styles.dot,children:/*#__PURE__*/_jsx(GoPrimitiveDot,{})}),isShowEditModal&&/*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsx(Modal,{setIsEdit:setShowEditModal,width:isDesktop?'30%':'100%',children:/*#__PURE__*/_jsx(EditProjectModal,{project:project,setIsEdit:setShowEditModal})}),portal),isShowShareModal&&/*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsx(Modal,{setIsEdit:setShowShareModal,width:isDesktop?'40%':'100%',height:isDesktop?'auto':'100%',children:/*#__PURE__*/_jsx(ShareProjectModal,{project:project,setIsEdit:setShowShareModal})}),portal)]});};export default ProjectCard;","map":{"version":3,"sources":["D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/src/components/code/projectManager/ProjectCard.js"],"names":["React","useEffect","useState","ReactDOM","useDispatch","useSelector","useMediaQuery","deleteProject","deleteReceivedProject","openProject","AiOutlineEdit","AiOutlineShareAlt","AiOutlineDelete","MdOpenInNew","GoPrimitiveDot","Modal","EditProjectModal","ShareProjectModal","styles","ProjectCard","project","dispatch","state","auth","isDesktop","query","isShowEditModal","setShowEditModal","isShowShareModal","setShowShareModal","isReceived","setisReceived","loading","setLoading","receivers","find","r","_id","user","editHandler","type","payload","shareHandler","openHandler","deleteOwnProjectHandler","deleteReceivedProjectHandler","backgroundImage","author","avatar","container","open","content","infor","name","username","btn_group","icon_wrapper","isRead","dot","createPortal","portal"],"mappings":"0gBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,QAAP,KAAqB,WAArB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,aAAT,KAA8B,kBAA9B,CAEA,OAASC,aAAT,CAAwBC,qBAAxB,CAA+CC,WAA/C,KAAkE,sCAAlE,CAEA,OAASC,aAAT,CAAwBC,iBAAxB,CAA2CC,eAA3C,KAAiE,gBAAjE,CACA,OAAQC,WAAR,KAA0B,gBAA1B,CACA,OAAQC,cAAR,KAA6B,gBAA7B,CAEA,MAAOC,CAAAA,KAAP,KAAkB,kBAAlB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,8BAA7B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,+BAA9B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,C,wFAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAe,IAAbC,CAAAA,OAAa,MAAbA,OAAa,CAC/B,GAAMC,CAAAA,QAAQ,CAAGjB,WAAW,EAA5B,CACA,iBAAeC,WAAW,CAAC,SAAAiB,KAAK,QAAEA,CAAAA,KAAF,EAAN,CAA1B,CAAOC,IAAP,cAAOA,IAAP,CAEA,GAAMC,CAAAA,SAAS,CAAGlB,aAAa,CAAC,CAAEmB,KAAK,CAAE,qBAAT,CAAD,CAA/B,CAEA,cAA4CvB,QAAQ,CAAC,KAAD,CAApD,wCAAOwB,eAAP,eAAwBC,gBAAxB,eACA,eAA8CzB,QAAQ,CAAC,KAAD,CAAtD,yCAAO0B,gBAAP,eAAyBC,iBAAzB,eACA,eAAoC3B,QAAQ,CAAC,KAAD,CAA5C,yCAAO4B,UAAP,eAAmBC,aAAnB,eACA,eAA8B7B,QAAQ,CAAC,KAAD,CAAtC,yCAAO8B,OAAP,eAAgBC,UAAhB,eAEAhC,SAAS,CAAC,UAAI,CACVmB,OAAO,CAACc,SAAR,CAAkBC,IAAlB,CAAuB,SAAAC,CAAC,QAAEA,CAAAA,CAAC,CAACC,GAAF,EAASd,IAAI,CAACe,IAAL,CAAUD,GAArB,EAAxB,GAAqDN,aAAa,CAAC,IAAD,CAAlE,CAEH,CAHQ,CAGN,CAACR,IAAI,CAACe,IAAL,CAAUD,GAAX,CAAgBjB,OAAO,CAACc,SAAxB,CAHM,CAAT,CAKA,GAAMK,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtBlB,QAAQ,CAAC,CAACmB,IAAI,CAAE,OAAP,CAAgBC,OAAO,CAAE,IAAzB,CAAD,CAAR,CACAd,gBAAgB,CAAC,IAAD,CAAhB,CACH,CAHD,CAKA,GAAMe,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvBrB,QAAQ,CAAC,CAACmB,IAAI,CAAE,OAAP,CAAgBC,OAAO,CAAE,IAAzB,CAAD,CAAR,CACAZ,iBAAiB,CAAC,IAAD,CAAjB,CACH,CAHD,CAKA,GAAMc,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtBtB,QAAQ,CAACZ,WAAW,CAACW,OAAD,CAAZ,CAAR,CACH,CAFD,CAIA,GAAMwB,CAAAA,uBAAuB,2FAAG,uIACzBZ,OADyB,iEAE5BC,UAAU,CAAC,IAAD,CAAV,CAF4B,sBAGtBZ,CAAAA,QAAQ,CAACd,aAAa,CAACgB,IAAD,CAAOH,OAAO,CAACiB,GAAf,CAAd,CAHc,QAI5BJ,UAAU,CAAC,KAAD,CAAV,CAJ4B,sDAAH,kBAAvBW,CAAAA,uBAAuB,2CAA7B,CAOA,GAAMC,CAAAA,4BAA4B,2FAAG,4IAC9Bb,OAD8B,mEAEjCC,UAAU,CAAC,IAAD,CAAV,CAFiC,uBAG3BZ,CAAAA,QAAQ,CAACb,qBAAqB,CAACe,IAAD,CAAOH,OAAO,CAACiB,GAAf,CAAtB,CAHmB,QAIjCJ,UAAU,CAAC,KAAD,CAAV,CAJiC,wDAAH,kBAA5BY,CAAAA,4BAA4B,2CAAlC,CAOA,mBACI,aAAK,KAAK,CAAE,CAACC,eAAe,eAAQ1B,OAAO,CAAC2B,MAAR,CAAeC,MAAvB,KAAhB,CAAZ,CAA+D,SAAS,CAAE9B,MAAM,CAAC+B,SAAjF,wBACQ,YAAK,OAAO,CAAEN,WAAd,CAA2B,SAAS,CAAEzB,MAAM,CAACgC,IAA7C,uBAAmD,KAAC,WAAD,IAAnD,EADR,cAEQ,aAAK,SAAS,CAAEhC,MAAM,CAACiC,OAAvB,wBACI,aAAK,SAAS,CAAEjC,MAAM,CAACkC,KAAvB,wBACI,YAAK,SAAS,CAAElC,MAAM,CAACmC,IAAvB,UAA8BjC,OAAO,CAACiC,IAAtC,EADJ,cAEI,aAAK,SAAS,CAAEnC,MAAM,CAAC6B,MAAvB,sBAAwC3B,OAAO,CAAC2B,MAAR,CAAeO,QAAvD,GAFJ,GADJ,cAKI,aAAK,SAAS,CAAEpC,MAAM,CAACqC,SAAvB,WACK,CAACzB,UAAD,eAAe,YAAK,OAAO,CAAES,WAAd,CAA2B,SAAS,CAAErB,MAAM,CAACsC,YAA7C,uBAA2D,KAAC,aAAD,IAA3D,EADpB,CAEK1B,UAAU,cACX,YAAK,OAAO,CAAEe,4BAAd,CAA4C,SAAS,CAAE3B,MAAM,CAACsC,YAA9D,uBAA4E,KAAC,eAAD,IAA5E,EADW,cAEX,YAAK,OAAO,CAAEZ,uBAAd,CAAuC,SAAS,CAAE1B,MAAM,CAACsC,YAAzD,uBAAuE,KAAC,eAAD,IAAvE,EAJJ,CAMK,CAAC1B,UAAD,eAAe,YAAK,OAAO,CAAEY,YAAd,CAA4B,SAAS,CAAExB,MAAM,CAACsC,YAA9C,uBAA4D,KAAC,iBAAD,IAA5D,EANpB,GALJ,GAFR,CAgBS,CAACpC,OAAO,CAACqC,MAAT,eAAmB,YAAK,SAAS,CAAEvC,MAAM,CAACwC,GAAvB,uBAA4B,KAAC,cAAD,IAA5B,EAhB5B,CAmBKhC,eAAe,eAAIvB,QAAQ,CAACwD,YAAT,cACpB,KAAC,KAAD,EAAO,SAAS,CAAEhC,gBAAlB,CAAoC,KAAK,CAAEH,SAAS,CAAG,KAAH,CAAU,MAA9D,uBACI,KAAC,gBAAD,EAAkB,OAAO,CAAEJ,OAA3B,CAAoC,SAAS,CAAEO,gBAA/C,EADJ,EADoB,CAIlBiC,MAJkB,CAnBxB,CAyBKhC,gBAAgB,eAAIzB,QAAQ,CAACwD,YAAT,cACrB,KAAC,KAAD,EAAO,SAAS,CAAE9B,iBAAlB,CAAqC,KAAK,CAAEL,SAAS,CAAG,KAAH,CAAU,MAA/D,CAAuE,MAAM,CAAEA,SAAS,CAAG,MAAH,CAAW,MAAnG,uBACI,KAAC,iBAAD,EAAmB,OAAO,CAAEJ,OAA5B,CAAqC,SAAS,CAAES,iBAAhD,EADJ,EADqB,CAInB+B,MAJmB,CAzBzB,GADJ,CAiCH,CA7ED,CA+EA,cAAezC,CAAAA,WAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useMediaQuery } from 'react-responsive'\r\n\r\nimport { deleteProject, deleteReceivedProject, openProject } from '../../../store/actions/projectAction'\r\n\r\nimport { AiOutlineEdit, AiOutlineShareAlt, AiOutlineDelete} from 'react-icons/ai'\r\nimport {MdOpenInNew} from 'react-icons/md'\r\nimport {GoPrimitiveDot} from 'react-icons/go'\r\n\r\nimport Modal from '../../util/Modal'\r\nimport EditProjectModal from '../../modal/EditProjectModal'\r\nimport ShareProjectModal from '../../modal/ShareProjectModal'\r\n\r\nimport styles from './ProjectCard.module.css'\r\n\r\nconst ProjectCard = ({project}) => {\r\n    const dispatch = useDispatch()\r\n    const {auth} = useSelector(state=>state)\r\n\r\n    const isDesktop = useMediaQuery({ query: '(min-width: 1224px)' })\r\n\r\n    const [isShowEditModal, setShowEditModal] = useState(false)\r\n    const [isShowShareModal, setShowShareModal] = useState(false)\r\n    const [isReceived, setisReceived] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    useEffect(()=>{\r\n        project.receivers.find(r=>r._id == auth.user._id) && setisReceived(true)\r\n\r\n    }, [auth.user._id, project.receivers])\r\n\r\n    const editHandler = () => {\r\n        dispatch({type: 'MODAL', payload: true})\r\n        setShowEditModal(true)\r\n    }\r\n\r\n    const shareHandler = () => {\r\n        dispatch({type: 'MODAL', payload: true})\r\n        setShowShareModal(true)\r\n    }\r\n\r\n    const openHandler = () => {\r\n        dispatch(openProject(project))\r\n    }\r\n\r\n    const deleteOwnProjectHandler = async () => {\r\n        if(loading) return\r\n        setLoading(true)\r\n        await dispatch(deleteProject(auth, project._id))\r\n        setLoading(false)\r\n    }\r\n\r\n    const deleteReceivedProjectHandler = async () => {\r\n        if(loading) return\r\n        setLoading(true)\r\n        await dispatch(deleteReceivedProject(auth, project._id))\r\n        setLoading(false)\r\n    }\r\n\r\n    return (\r\n        <div style={{backgroundImage:`url(${project.author.avatar})`}} className={styles.container}>\r\n                <div onClick={openHandler} className={styles.open}><MdOpenInNew/></div>\r\n                <div className={styles.content}>\r\n                    <div className={styles.infor}>\r\n                        <div className={styles.name}>{project.name}</div>\r\n                        <div className={styles.author}>Author: {project.author.username}</div>\r\n                    </div>\r\n                    <div className={styles.btn_group}>\r\n                        {!isReceived && <div onClick={editHandler} className={styles.icon_wrapper}><AiOutlineEdit/></div>}\r\n                        {isReceived ? \r\n                        <div onClick={deleteReceivedProjectHandler} className={styles.icon_wrapper}><AiOutlineDelete/></div>:\r\n                        <div onClick={deleteOwnProjectHandler} className={styles.icon_wrapper}><AiOutlineDelete/></div>\r\n                        }\r\n                        {!isReceived && <div onClick={shareHandler} className={styles.icon_wrapper}><AiOutlineShareAlt/></div>}\r\n                    </div>\r\n                </div>\r\n                {!project.isRead && <div className={styles.dot}><GoPrimitiveDot/></div>}\r\n            \r\n\r\n            {isShowEditModal && ReactDOM.createPortal(\r\n            <Modal setIsEdit={setShowEditModal} width={isDesktop ? '30%': '100%'} >\r\n                <EditProjectModal project={project} setIsEdit={setShowEditModal} />\r\n            </Modal>\r\n            , portal)}\r\n\r\n            {isShowShareModal && ReactDOM.createPortal(\r\n            <Modal setIsEdit={setShowShareModal} width={isDesktop ? '40%': '100%'} height={isDesktop ? 'auto': '100%'} >\r\n                <ShareProjectModal project={project} setIsEdit={setShowShareModal} />\r\n            </Modal>\r\n            , portal)}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProjectCard\r\n"]},"metadata":{},"sourceType":"module"}