{"ast":null,"code":"'use strict';\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar React = require('react');\n\nvar Component = React.Component;\n\nvar ReactDOM = require('react-dom');\n\nvar deepExtend = require('deep-extend');\n\nvar PropTypes = require('prop-types');\n\nvar findDOMNode = ReactDOM.findDOMNode;\n\nvar Cropper = function (_Component) {\n  _inherits(Cropper, _Component);\n\n  function Cropper(props) {\n    _classCallCheck(this, Cropper);\n\n    var _this = _possibleConstructorReturn(this, (Cropper.__proto__ || Object.getPrototypeOf(Cropper)).call(this, props));\n\n    var originX = props.originX,\n        originY = props.originY,\n        width = props.width,\n        height = props.height,\n        fixedRatio = props.fixedRatio,\n        ratio = props.ratio,\n        styles = props.styles,\n        src = props.src;\n    _this.state = {\n      // image and clone image src\n      src: src,\n      // background image width\n      imgWidth: '100%',\n      // background image height\n      imgHeight: 'auto',\n      // cropper width, drag trigger changing\n      frameWidth4Style: width,\n      // cropper height, drag trigger changing\n      frameHeight4Style: fixedRatio ? width / ratio : height,\n      // cropper height, drag trigger changing\n      toImgTop4Style: 0,\n      toImgLeft4Style: 0,\n      // cropper original position(x axis), accroding to image left\n      originX: originX,\n      // cropper original position(y axis), accroding to image top\n      originY: originY,\n      // dragging start, position's pageX and pageY\n      startPageX: 0,\n      startPageY: 0,\n      // frame width, change only dragging stop\n      frameWidth: width,\n      // frame height, change only dragging stop\n      frameHeight: fixedRatio ? width / ratio : height,\n      dragging: false,\n      maxLeft: 0,\n      maxTop: 0,\n      action: null,\n      imgLoaded: false,\n      styles: deepExtend({}, defaultStyles, styles)\n    };\n    return _this;\n  } // initialize style, component did mount or component updated.\n\n\n  _createClass(Cropper, [{\n    key: 'initStyles',\n    value: function initStyles() {\n      var _this2 = this;\n\n      var container = findDOMNode(this.container);\n      this.setState({\n        imgWidth: container.offsetWidth\n      }, function () {\n        // calc frame width height\n        var _props = _this2.props,\n            originX = _props.originX,\n            originY = _props.originY,\n            disabled = _props.disabled;\n        if (disabled) return;\n        var _state = _this2.state,\n            imgWidth = _state.imgWidth,\n            imgHeight = _state.imgHeight;\n        var _state2 = _this2.state,\n            frameWidth = _state2.frameWidth,\n            frameHeight = _state2.frameHeight;\n        var maxLeft = imgWidth - frameWidth;\n        var maxTop = imgHeight - frameHeight;\n\n        if (originX + frameWidth >= imgWidth) {\n          originX = imgWidth - frameWidth;\n\n          _this2.setState({\n            originX: originX\n          });\n        }\n\n        if (originY + frameHeight >= imgHeight) {\n          originY = imgHeight - frameHeight;\n\n          _this2.setState({\n            originY: originY\n          });\n        }\n\n        _this2.setState({\n          maxLeft: maxLeft,\n          maxTop: maxTop\n        }); // calc clone position\n\n\n        _this2.calcPosition(frameWidth, frameHeight, originX, originY, function () {\n          var _state3 = _this2.state,\n              frameWidth4Style = _state3.frameWidth4Style,\n              frameHeight4Style = _state3.frameHeight4Style,\n              toImgTop4Style = _state3.toImgTop4Style,\n              toImgLeft4Style = _state3.toImgLeft4Style;\n\n          _this2.setState({\n            frameWidth: frameWidth4Style,\n            frameHeight: frameHeight4Style,\n            originX: toImgLeft4Style,\n            originY: toImgTop4Style\n          });\n        });\n      });\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // event\n      document.addEventListener('mousemove', this.handleDrag.bind(this));\n      document.addEventListener('touchmove', this.handleDrag.bind(this));\n      document.addEventListener('mouseup', this.handleDragStop.bind(this));\n      document.addEventListener('touchend', this.handleDragStop.bind(this));\n      this.imgGetSizeBeforeLoad();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      // remove event\n      document.removeEventListener('mousemove', this.handleDrag.bind(this));\n      document.removeEventListener('touchmove', this.handleDrag.bind(this));\n      document.removeEventListener('mouseup', this.handleDragStop.bind(this));\n      document.removeEventListener('touchend', this.handleDragStop.bind(this));\n    } // props change to update frame\n\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(newProps) {\n      var _this3 = this;\n\n      var _props2 = this.props,\n          width = _props2.width,\n          height = _props2.height,\n          originX = _props2.originX,\n          originY = _props2.originY; // img src changed\n\n      if (this.props.src !== newProps.src) {\n        return this.setState({\n          src: newProps.src\n        }, this.imgGetSizeBeforeLoad);\n      }\n\n      if (width !== newProps.width || height !== newProps.height || originX !== newProps.originX || originY !== newProps.originY) {\n        // update frame\n        this.setState({\n          frameWidth: newProps.width,\n          frameHeight: newProps.height,\n          originX: newProps.originX,\n          originY: newProps.originY\n        }, function () {\n          return _this3.initStyles();\n        });\n      }\n    } // image onloaded hook\n\n  }, {\n    key: 'imgOnLoad',\n    value: function imgOnLoad() {\n      this.props.onImgLoad();\n    } // adjust image height when image size scaleing change, also initialize styles\n\n  }, {\n    key: 'imgGetSizeBeforeLoad',\n    value: function imgGetSizeBeforeLoad() {\n      var _this4 = this; // trick way to get natural width of image after component did mount\n\n\n      setTimeout(function () {\n        var img = findDOMNode(_this4.img);\n\n        if (img && img.naturalWidth) {\n          // image scaleing\n          var imgHeight = parseInt(img.offsetWidth / img.naturalWidth * img.naturalHeight); // resize imgHeight\n\n          _this4.setState({\n            imgHeight: imgHeight,\n            imgLoaded: true\n          }, _this4.initStyles); // before image loaded hook\n\n\n          _this4.props.beforeImgLoad();\n        } else if (img) {\n          // catch if image natural width is 0\n          _this4.imgGetSizeBeforeLoad();\n        }\n      }, 0);\n    } // frame width, frame height, position left, position top\n\n  }, {\n    key: 'calcPosition',\n    value: function calcPosition(width, height, left, top, callback) {\n      var _state4 = this.state,\n          imgWidth = _state4.imgWidth,\n          imgHeight = _state4.imgHeight;\n      var _props3 = this.props,\n          ratio = _props3.ratio,\n          fixedRatio = _props3.fixedRatio; // width < 0 or height < 0, frame invalid\n\n      if (width < 0 || height < 0) return false; // if ratio is fixed\n\n      if (fixedRatio) {\n        // adjust by width\n        if (width / imgWidth > height / imgHeight) {\n          if (width > imgWidth) {\n            width = imgWidth;\n            left = 0;\n            height = width / ratio;\n          }\n        } else {\n          // adjust by height\n          if (height > imgHeight) {\n            height = imgHeight;\n            top = 0;\n            width = height * ratio;\n          }\n        }\n      } // frame width plus offset left, larger than img's width\n\n\n      if (width + left > imgWidth) {\n        if (fixedRatio) {\n          // if fixed ratio, adjust left with width\n          left = imgWidth - width;\n        } else {\n          // resize width with left\n          width = width - (width + left - imgWidth);\n        }\n      } // frame heigth plust offset top, larger than img's height\n\n\n      if (height + top > imgHeight) {\n        if (fixedRatio) {\n          // if fixed ratio, adjust top with height\n          top = imgHeight - height;\n        } else {\n          // resize height with top\n          height = height - (height + top - imgHeight);\n        }\n      } // left is invalid\n\n\n      if (left < 0) {\n        left = 0;\n      } // top is invalid\n\n\n      if (top < 0) {\n        top = 0;\n      } // if frame width larger than img width\n\n\n      if (width > imgWidth) {\n        width = imgWidth;\n      } // if frame height larger than img height\n\n\n      if (height > imgHeight) {\n        height = imgHeight;\n      }\n\n      this.setState({\n        toImgLeft4Style: left,\n        toImgTop4Style: top,\n        frameWidth4Style: width,\n        frameHeight4Style: height\n      }, function () {\n        if (callback) callback();\n      });\n    } // create a new frame, and drag, so frame width and height is became larger.\n\n  }, {\n    key: 'createNewFrame',\n    value: function createNewFrame(e) {\n      if (this.state.dragging) {\n        // click or touch event\n        var _ref = e.pageX ? e : e.targetTouches[0],\n            pageX = _ref.pageX,\n            pageY = _ref.pageY;\n\n        var _props4 = this.props,\n            ratio = _props4.ratio,\n            fixedRatio = _props4.fixedRatio;\n        var _state5 = this.state,\n            frameWidth = _state5.frameWidth,\n            frameHeight = _state5.frameHeight,\n            startPageX = _state5.startPageX,\n            startPageY = _state5.startPageY,\n            originX = _state5.originX,\n            originY = _state5.originY; // click or touch point's offset from source image top\n\n        var _x = pageX - startPageX;\n\n        var _y = pageY - startPageY; // frame new width, height, left, top\n\n\n        var _width = frameWidth + Math.abs(_x);\n\n        var _height = fixedRatio ? (frameWidth + Math.abs(_x)) / ratio : frameHeight + Math.abs(_y);\n\n        var _left = originX;\n        var _top = originY;\n\n        if (_y < 0) {\n          // drag and resize to top, top changing\n          _top = fixedRatio ? originY - Math.abs(_x) / ratio : originY - Math.abs(_y);\n        }\n\n        if (_x < 0) {\n          // drag and resize, go to left, left changing\n          _left = originX + _x;\n        } // calc position\n\n\n        return this.calcPosition(_width, _height, _left, _top);\n      }\n    } // frame move handler\n\n  }, {\n    key: 'frameMove',\n    value: function frameMove(e) {\n      var _state6 = this.state,\n          originX = _state6.originX,\n          originY = _state6.originY,\n          startPageX = _state6.startPageX,\n          startPageY = _state6.startPageY,\n          frameWidth = _state6.frameWidth,\n          frameHeight = _state6.frameHeight,\n          maxLeft = _state6.maxLeft,\n          maxTop = _state6.maxTop;\n\n      var _ref2 = e.pageX ? e : e.targetTouches[0],\n          pageX = _ref2.pageX,\n          pageY = _ref2.pageY;\n\n      var _x = pageX - startPageX + originX;\n\n      var _y = pageY - startPageY + originY;\n\n      if (pageX < 0 || pageY < 0) return false;\n      if (_x > maxLeft) _x = maxLeft;\n      if (_y > maxTop) _y = maxTop; // frame width, frame height not change, top and left changing\n\n      this.calcPosition(frameWidth, frameHeight, _x, _y);\n    } // drag dot to different direction\n\n  }, {\n    key: 'frameDotMove',\n    value: function frameDotMove(dir, e) {\n      var _ref3 = e.pageX ? e : e.targetTouches[0],\n          pageX = _ref3.pageX,\n          pageY = _ref3.pageY;\n\n      var _props5 = this.props,\n          ratio = _props5.ratio,\n          fixedRatio = _props5.fixedRatio;\n      var _state7 = this.state,\n          startPageX = _state7.startPageX,\n          startPageY = _state7.startPageY,\n          originX = _state7.originX,\n          originY = _state7.originY,\n          frameWidth4Style = _state7.frameWidth4Style,\n          frameHeight4Style = _state7.frameHeight4Style,\n          frameWidth = _state7.frameWidth,\n          frameHeight = _state7.frameHeight,\n          imgWidth = _state7.imgWidth,\n          imgHeight = _state7.imgHeight;\n\n      if (pageY !== 0 && pageX !== 0) {\n        // current drag position offset x and y to first drag start position\n        var _x = pageX - startPageX;\n\n        var _y = pageY - startPageY;\n\n        var _width = 0;\n        var _height = 0;\n        var _top = 0;\n        var _left = 0; // just calc width, height, left, top in each direction\n\n        switch (dir) {\n          case 'ne':\n            _width = frameWidth + _x;\n            _height = fixedRatio ? _width / ratio : frameHeight - _y;\n            _left = originX;\n            _top = fixedRatio ? originY - _x / ratio : originY + _y;\n            break;\n\n          case 'e':\n            _width = frameWidth + _x;\n            _height = fixedRatio ? _width / ratio : frameHeight;\n            _left = originX;\n            _top = fixedRatio ? originY - _x / ratio * 0.5 : originY;\n            break;\n\n          case 'se':\n            _width = frameWidth + _x;\n            _height = fixedRatio ? _width / ratio : frameHeight + _y;\n            _left = originX;\n            _top = originY;\n            break;\n\n          case 'n':\n            _height = frameHeight - _y;\n            _width = fixedRatio ? _height * ratio : frameWidth;\n            _left = fixedRatio ? originX + _y * ratio * 0.5 : originX;\n            _top = originY + _y;\n            break;\n\n          case 'nw':\n            _width = frameWidth - _x;\n            _height = fixedRatio ? _width / ratio : frameHeight - _y;\n            _left = originX + _x;\n            _top = fixedRatio ? originY + _x / ratio : originY + _y;\n            break;\n\n          case 'w':\n            _width = frameWidth - _x;\n            _height = fixedRatio ? _width / ratio : frameHeight;\n            _left = originX + _x;\n            _top = fixedRatio ? originY + _x / ratio * 0.5 : originY;\n            break;\n\n          case 'sw':\n            _width = frameWidth - _x;\n            _height = fixedRatio ? _width / ratio : frameHeight + _y;\n            _left = originX + _x;\n            _top = originY;\n            break;\n\n          case 's':\n            _height = frameHeight + _y;\n            _width = fixedRatio ? _height * ratio : frameWidth;\n            _left = fixedRatio ? originX - _y * ratio * 0.5 : originX;\n            _top = originY;\n            break;\n\n          default:\n            break;\n        }\n\n        if (_width > imgWidth || _height > imgHeight) {\n          if (frameWidth4Style >= imgWidth || frameHeight4Style >= imgHeight) {\n            return false;\n          }\n        }\n\n        return this.calcPosition(_width, _height, _left, _top);\n      }\n    } // judge whether to create new frame, frame or frame dot move acroding to action\n\n  }, {\n    key: 'handleDrag',\n    value: function handleDrag(e) {\n      if (this.state.dragging) {\n        e.preventDefault();\n        var action = this.state.action;\n        if (!action) return this.createNewFrame(e);\n        if (action === 'move') return this.frameMove(e);\n        this.frameDotMove(action, e);\n      }\n    } // starting dragging\n\n  }, {\n    key: 'handleDragStart',\n    value: function handleDragStart(e) {\n      var _this5 = this;\n\n      var allowNewSelection = this.props.allowNewSelection;\n      var action = e.target.getAttribute('data-action') ? e.target.getAttribute('data-action') : e.target.parentNode.getAttribute('data-action');\n\n      var _ref4 = e.pageX ? e : e.targetTouches[0],\n          pageX = _ref4.pageX,\n          pageY = _ref4.pageY; // if drag or move or allow new selection, change startPageX, startPageY, dragging state\n\n\n      if (action || allowNewSelection) {\n        e.preventDefault(); // drag start, set startPageX, startPageY for dragging start point\n\n        this.setState({\n          startPageX: pageX,\n          startPageY: pageY,\n          dragging: true,\n          action: action\n        });\n      } // if no action and allowNewSelection, then create a new frame\n\n\n      if (!action && allowNewSelection) {\n        var container = findDOMNode(this.container);\n        var offsetLeft = container.offsetLeft,\n            offsetTop = container.offsetTop;\n        this.setState({\n          // set offset left and top of new frame\n          originX: pageX - offsetLeft,\n          originY: pageY - offsetTop,\n          frameWidth: 2,\n          frameHeight: 2\n        }, function () {\n          return _this5.calcPosition(2, 2, pageX - offsetLeft, pageY - offsetTop);\n        });\n      }\n    } // crop image\n\n  }, {\n    key: 'crop',\n    value: function crop() {\n      var img = findDOMNode(this.img);\n      var canvas = document.createElement('canvas');\n      var _values$original = this.values().original,\n          x = _values$original.x,\n          y = _values$original.y,\n          width = _values$original.width,\n          height = _values$original.height;\n      canvas.width = width;\n      canvas.height = height;\n      canvas.getContext('2d').drawImage(img, x, y, width, height, 0, 0, width, height);\n      return canvas.toDataURL();\n    } // get current values\n\n  }, {\n    key: 'values',\n    value: function values() {\n      var img = findDOMNode(this.img);\n      var _state8 = this.state,\n          frameWidth = _state8.frameWidth,\n          frameHeight = _state8.frameHeight,\n          originX = _state8.originX,\n          originY = _state8.originY,\n          imgWidth = _state8.imgWidth,\n          imgHeight = _state8.imgHeight; // crop accroding image's natural width\n\n      var _scale = img.naturalWidth / imgWidth;\n\n      var realFrameWidth = frameWidth * _scale;\n      var realFrameHeight = frameHeight * _scale;\n      var realOriginX = originX * _scale;\n      var realOriginY = originY * _scale;\n      return {\n        display: {\n          width: frameWidth,\n          height: frameHeight,\n          x: originX,\n          y: originY,\n          imgWidth: imgWidth,\n          imgHeight: imgHeight\n        },\n        original: {\n          width: realFrameWidth,\n          height: realFrameHeight,\n          x: realOriginX,\n          y: realOriginY,\n          imgWidth: img.naturalWidth,\n          imgHeight: img.naturalHeight\n        }\n      };\n    } // stop dragging\n\n  }, {\n    key: 'handleDragStop',\n    value: function handleDragStop(e) {\n      var _this6 = this;\n\n      if (this.state.dragging) {\n        e.preventDefault();\n\n        var _findDOMNode = findDOMNode(this.frameNode),\n            offsetLeft = _findDOMNode.offsetLeft,\n            offsetTop = _findDOMNode.offsetTop,\n            offsetWidth = _findDOMNode.offsetWidth,\n            offsetHeight = _findDOMNode.offsetHeight;\n\n        var _state9 = this.state,\n            imgWidth = _state9.imgWidth,\n            imgHeight = _state9.imgHeight;\n        this.setState({\n          originX: offsetLeft,\n          originY: offsetTop,\n          dragging: false,\n          frameWidth: offsetWidth,\n          frameHeight: offsetHeight,\n          maxLeft: imgWidth - offsetWidth,\n          maxTop: imgHeight - offsetHeight,\n          action: null\n        }, function () {\n          var onChange = _this6.props.onChange;\n          if (onChange) onChange(_this6.values());\n        });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this7 = this;\n\n      var _state10 = this.state,\n          dragging = _state10.dragging,\n          imgHeight = _state10.imgHeight,\n          imgWidth = _state10.imgWidth,\n          imgLoaded = _state10.imgLoaded,\n          styles = _state10.styles,\n          src = _state10.src;\n      var disabled = this.props.disabled;\n      var imageNode = React.createElement('div', {\n        style: styles.source,\n        ref: function ref(_ref6) {\n          _this7.sourceNode = _ref6;\n        }\n      }, React.createElement('img', {\n        crossOrigin: 'anonymous',\n        src: src,\n        width: imgWidth,\n        height: imgHeight,\n        ref: function ref(_ref5) {\n          _this7.img = _ref5;\n        },\n        style: deepExtend({}, styles.img, styles.source_img),\n        onLoad: this.imgOnLoad.bind(this)\n      })); // disabled cropper\n\n      if (disabled) {\n        return React.createElement('div', {\n          style: deepExtend({}, styles.container, {\n            'position': 'relative',\n            'height': imgHeight\n          }),\n          ref: function ref(_ref7) {\n            _this7.container = _ref7;\n          }\n        }, imageNode, React.createElement('div', {\n          style: deepExtend({}, styles.modal, styles.modal_disabled)\n        }));\n      }\n\n      return React.createElement('div', {\n        onMouseDown: this.handleDragStart.bind(this),\n        onTouchStart: this.handleDragStart.bind(this),\n        style: deepExtend({}, styles.container, {\n          'position': 'relative',\n          'height': imgHeight\n        }),\n        ref: function ref(_ref10) {\n          _this7.container = _ref10;\n        }\n      }, imageNode, imgLoaded ? React.createElement('div', null, React.createElement('div', {\n        style: styles.modal\n      }), React.createElement('div', {\n        style: deepExtend({}, styles.frame, dragging ? styles.dragging_frame : {}, {\n          display: 'block',\n          left: this.state.toImgLeft4Style,\n          top: this.state.toImgTop4Style,\n          width: this.state.frameWidth4Style,\n          height: this.state.frameHeight4Style\n        }),\n        ref: function ref(_ref9) {\n          _this7.frameNode = _ref9;\n        }\n      }, React.createElement('div', {\n        style: styles.clone\n      }, React.createElement('img', {\n        src: src,\n        crossOrigin: 'anonymous',\n        width: imgWidth,\n        height: imgHeight,\n        style: deepExtend({}, styles.img, {\n          marginLeft: -1 * this.state.toImgLeft4Style,\n          marginTop: -1 * this.state.toImgTop4Style\n        }),\n        ref: function ref(_ref8) {\n          _this7.cloneImg = _ref8;\n        }\n      })), React.createElement('span', {\n        'data-action': 'move',\n        style: styles.move\n      }), React.createElement('span', {\n        'data-action': 'move',\n        style: deepExtend({}, styles.dot, styles.dotCenter)\n      }, React.createElement('span', {\n        style: deepExtend({}, styles.dotInner, styles.dotInnerCenterVertical)\n      }), React.createElement('span', {\n        style: deepExtend({}, styles.dotInner, styles.dotInnerCenterHorizontal)\n      })), React.createElement('span', {\n        'data-action': 'ne',\n        style: deepExtend({}, styles.dot, styles.dotNE)\n      }, React.createElement('span', {\n        style: deepExtend({}, styles.dotInner, styles.dotInnerNE)\n      })), React.createElement('span', {\n        'data-action': 'n',\n        style: deepExtend({}, styles.dot, styles.dotN)\n      }, React.createElement('span', {\n        style: deepExtend({}, styles.dotInner, styles.dotInnerN)\n      })), React.createElement('span', {\n        'data-action': 'nw',\n        style: deepExtend({}, styles.dot, styles.dotNW)\n      }, React.createElement('span', {\n        style: deepExtend({}, styles.dotInner, styles.dotInnerNW)\n      })), React.createElement('span', {\n        'data-action': 'e',\n        style: deepExtend({}, styles.dot, styles.dotE)\n      }, React.createElement('span', {\n        style: deepExtend({}, styles.dotInner, styles.dotInnerE)\n      })), React.createElement('span', {\n        'data-action': 'w',\n        style: deepExtend({}, styles.dot, styles.dotW)\n      }, React.createElement('span', {\n        style: deepExtend({}, styles.dotInner, styles.dotInnerW)\n      })), React.createElement('span', {\n        'data-action': 'se',\n        style: deepExtend({}, styles.dot, styles.dotSE)\n      }, React.createElement('span', {\n        style: deepExtend({}, styles.dotInner, styles.dotInnerSE)\n      })), React.createElement('span', {\n        'data-action': 's',\n        style: deepExtend({}, styles.dot, styles.dotS)\n      }, React.createElement('span', {\n        style: deepExtend({}, styles.dotInner, styles.dotInnerS)\n      })), React.createElement('span', {\n        'data-action': 'sw',\n        style: deepExtend({}, styles.dot, styles.dotSW)\n      }, React.createElement('span', {\n        style: deepExtend({}, styles.dotInner, styles.dotInnerSW)\n      })), React.createElement('span', {\n        'data-action': 'n',\n        style: deepExtend({}, styles.line, styles.lineN)\n      }), React.createElement('span', {\n        'data-action': 's',\n        style: deepExtend({}, styles.line, styles.lineS)\n      }), React.createElement('span', {\n        'data-action': 'w',\n        style: deepExtend({}, styles.line, styles.lineW)\n      }), React.createElement('span', {\n        'data-action': 'e',\n        style: deepExtend({}, styles.line, styles.lineE)\n      }))) : null);\n    }\n  }]);\n\n  return Cropper;\n}(Component);\n\nCropper.propTypes = {\n  src: PropTypes.string.isRequired,\n  originX: PropTypes.number,\n  originY: PropTypes.number,\n  ratio: PropTypes.number,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  fixedRatio: PropTypes.bool,\n  allowNewSelection: PropTypes.bool,\n  disabled: PropTypes.bool,\n  styles: PropTypes.object,\n  onImgLoad: PropTypes.func,\n  beforeImgLoad: PropTypes.func,\n  onChange: PropTypes.func\n};\nCropper.defaultProps = {\n  width: 200,\n  height: 200,\n  fixedRatio: true,\n  allowNewSelection: true,\n  ratio: 1,\n  originX: 0,\n  originY: 0,\n  styles: {},\n  onImgLoad: function onImgLoad() {},\n  beforeImgLoad: function beforeImgLoad() {}\n  /*\n  default inline styles\n  */\n\n};\nvar defaultStyles = {\n  container: {},\n  img: {\n    userDrag: 'none',\n    userSelect: 'none',\n    MozUserSelect: 'none',\n    WebkitUserDrag: 'none',\n    WebkitUserSelect: 'none',\n    WebkitTransform: 'translateZ(0)',\n    WebkitPerspective: 1000,\n    WebkitBackfaceVisibility: 'hidden'\n  },\n  clone: {\n    width: '100%',\n    height: '100%',\n    overflow: 'hidden',\n    position: 'absolute',\n    left: 0,\n    top: 0\n  },\n  frame: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    display: 'none'\n  },\n  dragging_frame: {\n    opacity: 0.8\n  },\n  source: {\n    overflow: 'hidden'\n  },\n  source_img: {\n    float: 'left'\n  },\n  modal: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    opacity: 0.4,\n    backgroundColor: '#000'\n  },\n  modal_disabled: {\n    backgroundColor: '#666',\n    opacity: 0.7,\n    cursor: 'not-allowed'\n  },\n  move: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    cursor: 'move',\n    outline: '1px dashed #88f',\n    backgroundColor: 'transparent'\n  },\n  dot: {\n    zIndex: 10\n  },\n  dotN: {\n    cursor: 'n-resize'\n  },\n  dotS: {\n    cursor: 's-resize'\n  },\n  dotE: {\n    cursor: 'e-resize'\n  },\n  dotW: {\n    cursor: 'w-resize'\n  },\n  dotNW: {\n    cursor: 'nw-resize'\n  },\n  dotNE: {\n    cursor: 'ne-resize'\n  },\n  dotSW: {\n    cursor: 'sw-resize'\n  },\n  dotSE: {\n    cursor: 'se-resize'\n  },\n  dotCenter: {\n    backgroundColor: 'transparent',\n    cursor: 'move'\n  },\n  dotInner: {\n    border: '1px solid #88f',\n    background: '#fff',\n    display: 'block',\n    width: 6,\n    height: 6,\n    padding: 0,\n    margin: 0,\n    position: 'absolute'\n  },\n  dotInnerN: {\n    top: -4,\n    left: '50%',\n    marginLeft: -4\n  },\n  dotInnerS: {\n    bottom: -4,\n    left: '50%',\n    marginLeft: -4\n  },\n  dotInnerE: {\n    right: -4,\n    top: '50%',\n    marginTop: -4\n  },\n  dotInnerW: {\n    left: -4,\n    top: '50%',\n    marginTop: -4\n  },\n  dotInnerNE: {\n    top: -4,\n    right: -4\n  },\n  dotInnerSE: {\n    bottom: -4,\n    right: -4\n  },\n  dotInnerNW: {\n    top: -4,\n    left: -4\n  },\n  dotInnerSW: {\n    bottom: -4,\n    left: -4\n  },\n  dotInnerCenterVertical: {\n    position: 'absolute',\n    border: 'none',\n    width: 2,\n    height: 8,\n    backgroundColor: '#88f',\n    top: '50%',\n    left: '50%',\n    marginLeft: -1,\n    marginTop: -4\n  },\n  dotInnerCenterHorizontal: {\n    position: 'absolute',\n    border: 'none',\n    width: 8,\n    height: 2,\n    backgroundColor: '#88f',\n    top: '50%',\n    left: '50%',\n    marginLeft: -4,\n    marginTop: -1\n  },\n  line: {\n    position: 'absolute',\n    display: 'block',\n    zIndex: 100\n  },\n  lineS: {\n    cursor: 's-resize',\n    bottom: 0,\n    left: 0,\n    width: '100%',\n    height: 4,\n    background: 'transparent'\n  },\n  lineN: {\n    cursor: 'n-resize',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: 4,\n    background: 'transparent'\n  },\n  lineE: {\n    cursor: 'e-resize',\n    right: 0,\n    top: 0,\n    width: 4,\n    height: '100%',\n    background: 'transparent'\n  },\n  lineW: {\n    cursor: 'w-resize',\n    left: 0,\n    top: 0,\n    width: 4,\n    height: '100%',\n    background: 'transparent'\n  }\n};\nmodule.exports = Cropper;","map":{"version":3,"sources":["D:/Project Web/PROJECT 12 (Only MERN)/Client/client/node_modules/react-image-cropper/lib/Cropper.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","React","require","Component","ReactDOM","deepExtend","PropTypes","findDOMNode","Cropper","_Component","_this","getPrototypeOf","originX","originY","width","height","fixedRatio","ratio","styles","src","state","imgWidth","imgHeight","frameWidth4Style","frameHeight4Style","toImgTop4Style","toImgLeft4Style","startPageX","startPageY","frameWidth","frameHeight","dragging","maxLeft","maxTop","action","imgLoaded","defaultStyles","initStyles","_this2","container","setState","offsetWidth","_props","disabled","_state","_state2","calcPosition","_state3","componentDidMount","document","addEventListener","handleDrag","bind","handleDragStop","imgGetSizeBeforeLoad","componentWillUnmount","removeEventListener","componentWillReceiveProps","newProps","_this3","_props2","imgOnLoad","onImgLoad","_this4","setTimeout","img","naturalWidth","parseInt","naturalHeight","beforeImgLoad","left","top","callback","_state4","_props3","createNewFrame","e","_ref","pageX","targetTouches","pageY","_props4","_state5","_x","_y","_width","Math","abs","_height","_left","_top","frameMove","_state6","_ref2","frameDotMove","dir","_ref3","_props5","_state7","preventDefault","handleDragStart","_this5","allowNewSelection","getAttribute","parentNode","_ref4","offsetLeft","offsetTop","crop","canvas","createElement","_values$original","values","original","x","y","getContext","drawImage","toDataURL","_state8","_scale","realFrameWidth","realFrameHeight","realOriginX","realOriginY","display","_this6","_findDOMNode","frameNode","offsetHeight","_state9","onChange","render","_this7","_state10","imageNode","style","source","ref","_ref6","sourceNode","crossOrigin","_ref5","source_img","onLoad","_ref7","modal","modal_disabled","onMouseDown","onTouchStart","_ref10","frame","dragging_frame","_ref9","clone","marginLeft","marginTop","_ref8","cloneImg","move","dot","dotCenter","dotInner","dotInnerCenterVertical","dotInnerCenterHorizontal","dotNE","dotInnerNE","dotN","dotInnerN","dotNW","dotInnerNW","dotE","dotInnerE","dotW","dotInnerW","dotSE","dotInnerSE","dotS","dotInnerS","dotSW","dotInnerSW","line","lineN","lineS","lineW","lineE","propTypes","string","isRequired","number","bool","object","func","defaultProps","userDrag","userSelect","MozUserSelect","WebkitUserDrag","WebkitUserSelect","WebkitTransform","WebkitPerspective","WebkitBackfaceVisibility","overflow","position","bottom","right","opacity","float","backgroundColor","cursor","outline","zIndex","border","background","padding","margin","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar React = require('react');\nvar Component = React.Component;\n\nvar ReactDOM = require('react-dom');\nvar deepExtend = require('deep-extend');\nvar PropTypes = require('prop-types');\nvar findDOMNode = ReactDOM.findDOMNode;\n\nvar Cropper = function (_Component) {\n  _inherits(Cropper, _Component);\n\n  function Cropper(props) {\n    _classCallCheck(this, Cropper);\n\n    var _this = _possibleConstructorReturn(this, (Cropper.__proto__ || Object.getPrototypeOf(Cropper)).call(this, props));\n\n    var originX = props.originX,\n        originY = props.originY,\n        width = props.width,\n        height = props.height,\n        fixedRatio = props.fixedRatio,\n        ratio = props.ratio,\n        styles = props.styles,\n        src = props.src;\n\n\n    _this.state = {\n      // image and clone image src\n      src: src,\n      // background image width\n      imgWidth: '100%',\n      // background image height\n      imgHeight: 'auto',\n      // cropper width, drag trigger changing\n      frameWidth4Style: width,\n      // cropper height, drag trigger changing\n      frameHeight4Style: fixedRatio ? width / ratio : height,\n      // cropper height, drag trigger changing\n      toImgTop4Style: 0,\n      toImgLeft4Style: 0,\n      // cropper original position(x axis), accroding to image left\n      originX: originX,\n      // cropper original position(y axis), accroding to image top\n      originY: originY,\n      // dragging start, position's pageX and pageY\n      startPageX: 0,\n      startPageY: 0,\n      // frame width, change only dragging stop\n      frameWidth: width,\n      // frame height, change only dragging stop\n      frameHeight: fixedRatio ? width / ratio : height,\n      dragging: false,\n      maxLeft: 0,\n      maxTop: 0,\n      action: null,\n      imgLoaded: false,\n      styles: deepExtend({}, defaultStyles, styles)\n    };\n    return _this;\n  }\n\n  // initialize style, component did mount or component updated.\n\n\n  _createClass(Cropper, [{\n    key: 'initStyles',\n    value: function initStyles() {\n      var _this2 = this;\n\n      var container = findDOMNode(this.container);\n      this.setState({\n        imgWidth: container.offsetWidth\n      }, function () {\n        // calc frame width height\n        var _props = _this2.props,\n            originX = _props.originX,\n            originY = _props.originY,\n            disabled = _props.disabled;\n\n\n        if (disabled) return;\n\n        var _state = _this2.state,\n            imgWidth = _state.imgWidth,\n            imgHeight = _state.imgHeight;\n        var _state2 = _this2.state,\n            frameWidth = _state2.frameWidth,\n            frameHeight = _state2.frameHeight;\n\n\n        var maxLeft = imgWidth - frameWidth;\n        var maxTop = imgHeight - frameHeight;\n\n        if (originX + frameWidth >= imgWidth) {\n          originX = imgWidth - frameWidth;\n          _this2.setState({\n            originX: originX\n          });\n        }\n        if (originY + frameHeight >= imgHeight) {\n          originY = imgHeight - frameHeight;\n          _this2.setState({\n            originY: originY\n          });\n        }\n\n        _this2.setState({\n          maxLeft: maxLeft,\n          maxTop: maxTop\n        });\n        // calc clone position\n        _this2.calcPosition(frameWidth, frameHeight, originX, originY, function () {\n          var _state3 = _this2.state,\n              frameWidth4Style = _state3.frameWidth4Style,\n              frameHeight4Style = _state3.frameHeight4Style,\n              toImgTop4Style = _state3.toImgTop4Style,\n              toImgLeft4Style = _state3.toImgLeft4Style;\n\n\n          _this2.setState({\n            frameWidth: frameWidth4Style,\n            frameHeight: frameHeight4Style,\n            originX: toImgLeft4Style,\n            originY: toImgTop4Style\n          });\n        });\n      });\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // event\n      document.addEventListener('mousemove', this.handleDrag.bind(this));\n      document.addEventListener('touchmove', this.handleDrag.bind(this));\n      document.addEventListener('mouseup', this.handleDragStop.bind(this));\n      document.addEventListener('touchend', this.handleDragStop.bind(this));\n      this.imgGetSizeBeforeLoad();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      // remove event\n      document.removeEventListener('mousemove', this.handleDrag.bind(this));\n      document.removeEventListener('touchmove', this.handleDrag.bind(this));\n      document.removeEventListener('mouseup', this.handleDragStop.bind(this));\n      document.removeEventListener('touchend', this.handleDragStop.bind(this));\n    }\n\n    // props change to update frame\n\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(newProps) {\n      var _this3 = this;\n\n      var _props2 = this.props,\n          width = _props2.width,\n          height = _props2.height,\n          originX = _props2.originX,\n          originY = _props2.originY;\n\n      // img src changed\n\n      if (this.props.src !== newProps.src) {\n        return this.setState({\n          src: newProps.src\n        }, this.imgGetSizeBeforeLoad);\n      }\n\n      if (width !== newProps.width || height !== newProps.height || originX !== newProps.originX || originY !== newProps.originY) {\n        // update frame\n        this.setState({\n          frameWidth: newProps.width,\n          frameHeight: newProps.height,\n          originX: newProps.originX,\n          originY: newProps.originY\n        }, function () {\n          return _this3.initStyles();\n        });\n      }\n    }\n\n    // image onloaded hook\n\n  }, {\n    key: 'imgOnLoad',\n    value: function imgOnLoad() {\n      this.props.onImgLoad();\n    }\n\n    // adjust image height when image size scaleing change, also initialize styles\n\n  }, {\n    key: 'imgGetSizeBeforeLoad',\n    value: function imgGetSizeBeforeLoad() {\n      var _this4 = this;\n\n      // trick way to get natural width of image after component did mount\n      setTimeout(function () {\n        var img = findDOMNode(_this4.img);\n        if (img && img.naturalWidth) {\n          // image scaleing\n          var imgHeight = parseInt(img.offsetWidth / img.naturalWidth * img.naturalHeight);\n          // resize imgHeight\n          _this4.setState({\n            imgHeight: imgHeight,\n            imgLoaded: true\n          }, _this4.initStyles);\n          // before image loaded hook\n          _this4.props.beforeImgLoad();\n        } else if (img) {\n          // catch if image natural width is 0\n          _this4.imgGetSizeBeforeLoad();\n        }\n      }, 0);\n    }\n\n    // frame width, frame height, position left, position top\n\n  }, {\n    key: 'calcPosition',\n    value: function calcPosition(width, height, left, top, callback) {\n      var _state4 = this.state,\n          imgWidth = _state4.imgWidth,\n          imgHeight = _state4.imgHeight;\n      var _props3 = this.props,\n          ratio = _props3.ratio,\n          fixedRatio = _props3.fixedRatio;\n      // width < 0 or height < 0, frame invalid\n\n      if (width < 0 || height < 0) return false;\n      // if ratio is fixed\n      if (fixedRatio) {\n        // adjust by width\n        if (width / imgWidth > height / imgHeight) {\n          if (width > imgWidth) {\n            width = imgWidth;\n            left = 0;\n            height = width / ratio;\n          }\n        } else {\n          // adjust by height\n          if (height > imgHeight) {\n            height = imgHeight;\n            top = 0;\n            width = height * ratio;\n          }\n        }\n      }\n      // frame width plus offset left, larger than img's width\n      if (width + left > imgWidth) {\n        if (fixedRatio) {\n          // if fixed ratio, adjust left with width\n          left = imgWidth - width;\n        } else {\n          // resize width with left\n          width = width - (width + left - imgWidth);\n        }\n      }\n      // frame heigth plust offset top, larger than img's height\n      if (height + top > imgHeight) {\n        if (fixedRatio) {\n          // if fixed ratio, adjust top with height\n          top = imgHeight - height;\n        } else {\n          // resize height with top\n          height = height - (height + top - imgHeight);\n        }\n      }\n      // left is invalid\n      if (left < 0) {\n        left = 0;\n      }\n      // top is invalid\n      if (top < 0) {\n        top = 0;\n      }\n      // if frame width larger than img width\n      if (width > imgWidth) {\n        width = imgWidth;\n      }\n      // if frame height larger than img height\n      if (height > imgHeight) {\n        height = imgHeight;\n      }\n      this.setState({\n        toImgLeft4Style: left,\n        toImgTop4Style: top,\n        frameWidth4Style: width,\n        frameHeight4Style: height\n      }, function () {\n        if (callback) callback();\n      });\n    }\n\n    // create a new frame, and drag, so frame width and height is became larger.\n\n  }, {\n    key: 'createNewFrame',\n    value: function createNewFrame(e) {\n      if (this.state.dragging) {\n        // click or touch event\n        var _ref = e.pageX ? e : e.targetTouches[0],\n            pageX = _ref.pageX,\n            pageY = _ref.pageY;\n\n        var _props4 = this.props,\n            ratio = _props4.ratio,\n            fixedRatio = _props4.fixedRatio;\n        var _state5 = this.state,\n            frameWidth = _state5.frameWidth,\n            frameHeight = _state5.frameHeight,\n            startPageX = _state5.startPageX,\n            startPageY = _state5.startPageY,\n            originX = _state5.originX,\n            originY = _state5.originY;\n        // click or touch point's offset from source image top\n\n        var _x = pageX - startPageX;\n        var _y = pageY - startPageY;\n\n        // frame new width, height, left, top\n        var _width = frameWidth + Math.abs(_x);\n        var _height = fixedRatio ? (frameWidth + Math.abs(_x)) / ratio : frameHeight + Math.abs(_y);\n        var _left = originX;\n        var _top = originY;\n\n        if (_y < 0) {\n          // drag and resize to top, top changing\n          _top = fixedRatio ? originY - Math.abs(_x) / ratio : originY - Math.abs(_y);\n        }\n\n        if (_x < 0) {\n          // drag and resize, go to left, left changing\n          _left = originX + _x;\n        }\n        // calc position\n        return this.calcPosition(_width, _height, _left, _top);\n      }\n    }\n\n    // frame move handler\n\n  }, {\n    key: 'frameMove',\n    value: function frameMove(e) {\n      var _state6 = this.state,\n          originX = _state6.originX,\n          originY = _state6.originY,\n          startPageX = _state6.startPageX,\n          startPageY = _state6.startPageY,\n          frameWidth = _state6.frameWidth,\n          frameHeight = _state6.frameHeight,\n          maxLeft = _state6.maxLeft,\n          maxTop = _state6.maxTop;\n\n      var _ref2 = e.pageX ? e : e.targetTouches[0],\n          pageX = _ref2.pageX,\n          pageY = _ref2.pageY;\n\n      var _x = pageX - startPageX + originX;\n      var _y = pageY - startPageY + originY;\n      if (pageX < 0 || pageY < 0) return false;\n\n      if (_x > maxLeft) _x = maxLeft;\n      if (_y > maxTop) _y = maxTop;\n      // frame width, frame height not change, top and left changing\n      this.calcPosition(frameWidth, frameHeight, _x, _y);\n    }\n\n    // drag dot to different direction\n\n  }, {\n    key: 'frameDotMove',\n    value: function frameDotMove(dir, e) {\n      var _ref3 = e.pageX ? e : e.targetTouches[0],\n          pageX = _ref3.pageX,\n          pageY = _ref3.pageY;\n\n      var _props5 = this.props,\n          ratio = _props5.ratio,\n          fixedRatio = _props5.fixedRatio;\n      var _state7 = this.state,\n          startPageX = _state7.startPageX,\n          startPageY = _state7.startPageY,\n          originX = _state7.originX,\n          originY = _state7.originY,\n          frameWidth4Style = _state7.frameWidth4Style,\n          frameHeight4Style = _state7.frameHeight4Style,\n          frameWidth = _state7.frameWidth,\n          frameHeight = _state7.frameHeight,\n          imgWidth = _state7.imgWidth,\n          imgHeight = _state7.imgHeight;\n\n\n      if (pageY !== 0 && pageX !== 0) {\n        // current drag position offset x and y to first drag start position\n        var _x = pageX - startPageX;\n        var _y = pageY - startPageY;\n\n        var _width = 0;\n        var _height = 0;\n        var _top = 0;\n        var _left = 0;\n        // just calc width, height, left, top in each direction\n        switch (dir) {\n          case 'ne':\n            _width = frameWidth + _x;\n            _height = fixedRatio ? _width / ratio : frameHeight - _y;\n            _left = originX;\n            _top = fixedRatio ? originY - _x / ratio : originY + _y;\n            break;\n          case 'e':\n            _width = frameWidth + _x;\n            _height = fixedRatio ? _width / ratio : frameHeight;\n            _left = originX;\n            _top = fixedRatio ? originY - _x / ratio * 0.5 : originY;\n            break;\n          case 'se':\n            _width = frameWidth + _x;\n            _height = fixedRatio ? _width / ratio : frameHeight + _y;\n            _left = originX;\n            _top = originY;\n            break;\n          case 'n':\n            _height = frameHeight - _y;\n            _width = fixedRatio ? _height * ratio : frameWidth;\n            _left = fixedRatio ? originX + _y * ratio * 0.5 : originX;\n            _top = originY + _y;\n            break;\n          case 'nw':\n            _width = frameWidth - _x;\n            _height = fixedRatio ? _width / ratio : frameHeight - _y;\n            _left = originX + _x;\n            _top = fixedRatio ? originY + _x / ratio : originY + _y;\n            break;\n          case 'w':\n            _width = frameWidth - _x;\n            _height = fixedRatio ? _width / ratio : frameHeight;\n            _left = originX + _x;\n            _top = fixedRatio ? originY + _x / ratio * 0.5 : originY;\n            break;\n          case 'sw':\n            _width = frameWidth - _x;\n            _height = fixedRatio ? _width / ratio : frameHeight + _y;\n            _left = originX + _x;\n            _top = originY;\n            break;\n          case 's':\n            _height = frameHeight + _y;\n            _width = fixedRatio ? _height * ratio : frameWidth;\n            _left = fixedRatio ? originX - _y * ratio * 0.5 : originX;\n            _top = originY;\n            break;\n          default:\n            break;\n        }\n\n        if (_width > imgWidth || _height > imgHeight) {\n          if (frameWidth4Style >= imgWidth || frameHeight4Style >= imgHeight) {\n            return false;\n          }\n        }\n\n        return this.calcPosition(_width, _height, _left, _top);\n      }\n    }\n\n    // judge whether to create new frame, frame or frame dot move acroding to action\n\n  }, {\n    key: 'handleDrag',\n    value: function handleDrag(e) {\n      if (this.state.dragging) {\n        e.preventDefault();\n        var action = this.state.action;\n\n\n        if (!action) return this.createNewFrame(e);\n        if (action === 'move') return this.frameMove(e);\n        this.frameDotMove(action, e);\n      }\n    }\n\n    // starting dragging\n\n  }, {\n    key: 'handleDragStart',\n    value: function handleDragStart(e) {\n      var _this5 = this;\n\n      var allowNewSelection = this.props.allowNewSelection;\n\n\n      var action = e.target.getAttribute('data-action') ? e.target.getAttribute('data-action') : e.target.parentNode.getAttribute('data-action');\n\n      var _ref4 = e.pageX ? e : e.targetTouches[0],\n          pageX = _ref4.pageX,\n          pageY = _ref4.pageY;\n\n      // if drag or move or allow new selection, change startPageX, startPageY, dragging state\n\n\n      if (action || allowNewSelection) {\n        e.preventDefault();\n        // drag start, set startPageX, startPageY for dragging start point\n        this.setState({\n          startPageX: pageX,\n          startPageY: pageY,\n          dragging: true,\n          action: action\n        });\n      }\n      // if no action and allowNewSelection, then create a new frame\n      if (!action && allowNewSelection) {\n        var container = findDOMNode(this.container);\n        var offsetLeft = container.offsetLeft,\n            offsetTop = container.offsetTop;\n\n\n        this.setState({\n          // set offset left and top of new frame\n          originX: pageX - offsetLeft,\n          originY: pageY - offsetTop,\n          frameWidth: 2,\n          frameHeight: 2\n        }, function () {\n          return _this5.calcPosition(2, 2, pageX - offsetLeft, pageY - offsetTop);\n        });\n      }\n    }\n\n    // crop image\n\n  }, {\n    key: 'crop',\n    value: function crop() {\n      var img = findDOMNode(this.img);\n      var canvas = document.createElement('canvas');\n      var _values$original = this.values().original,\n          x = _values$original.x,\n          y = _values$original.y,\n          width = _values$original.width,\n          height = _values$original.height;\n\n\n      canvas.width = width;\n      canvas.height = height;\n      canvas.getContext('2d').drawImage(img, x, y, width, height, 0, 0, width, height);\n      return canvas.toDataURL();\n    }\n\n    // get current values\n\n  }, {\n    key: 'values',\n    value: function values() {\n      var img = findDOMNode(this.img);\n      var _state8 = this.state,\n          frameWidth = _state8.frameWidth,\n          frameHeight = _state8.frameHeight,\n          originX = _state8.originX,\n          originY = _state8.originY,\n          imgWidth = _state8.imgWidth,\n          imgHeight = _state8.imgHeight;\n\n      // crop accroding image's natural width\n\n      var _scale = img.naturalWidth / imgWidth;\n      var realFrameWidth = frameWidth * _scale;\n      var realFrameHeight = frameHeight * _scale;\n      var realOriginX = originX * _scale;\n      var realOriginY = originY * _scale;\n\n      return {\n        display: {\n          width: frameWidth,\n          height: frameHeight,\n          x: originX,\n          y: originY,\n          imgWidth: imgWidth,\n          imgHeight: imgHeight\n        },\n        original: {\n          width: realFrameWidth,\n          height: realFrameHeight,\n          x: realOriginX,\n          y: realOriginY,\n          imgWidth: img.naturalWidth,\n          imgHeight: img.naturalHeight\n        }\n      };\n    }\n\n    // stop dragging\n\n  }, {\n    key: 'handleDragStop',\n    value: function handleDragStop(e) {\n      var _this6 = this;\n\n      if (this.state.dragging) {\n        e.preventDefault();\n\n        var _findDOMNode = findDOMNode(this.frameNode),\n            offsetLeft = _findDOMNode.offsetLeft,\n            offsetTop = _findDOMNode.offsetTop,\n            offsetWidth = _findDOMNode.offsetWidth,\n            offsetHeight = _findDOMNode.offsetHeight;\n\n        var _state9 = this.state,\n            imgWidth = _state9.imgWidth,\n            imgHeight = _state9.imgHeight;\n\n\n        this.setState({\n          originX: offsetLeft,\n          originY: offsetTop,\n          dragging: false,\n          frameWidth: offsetWidth,\n          frameHeight: offsetHeight,\n          maxLeft: imgWidth - offsetWidth,\n          maxTop: imgHeight - offsetHeight,\n          action: null\n        }, function () {\n          var onChange = _this6.props.onChange;\n\n          if (onChange) onChange(_this6.values());\n        });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this7 = this;\n\n      var _state10 = this.state,\n          dragging = _state10.dragging,\n          imgHeight = _state10.imgHeight,\n          imgWidth = _state10.imgWidth,\n          imgLoaded = _state10.imgLoaded,\n          styles = _state10.styles,\n          src = _state10.src;\n      var disabled = this.props.disabled;\n\n\n      var imageNode = React.createElement(\n        'div',\n        {\n          style: styles.source,\n          ref: function ref(_ref6) {\n            _this7.sourceNode = _ref6;\n          }\n        },\n        React.createElement('img', {\n          crossOrigin: 'anonymous',\n          src: src,\n          width: imgWidth,\n          height: imgHeight,\n          ref: function ref(_ref5) {\n            _this7.img = _ref5;\n          },\n          style: deepExtend({}, styles.img, styles.source_img),\n          onLoad: this.imgOnLoad.bind(this)\n        })\n      );\n      // disabled cropper\n      if (disabled) {\n        return React.createElement(\n          'div',\n          {\n            style: deepExtend({}, styles.container, {\n              'position': 'relative',\n              'height': imgHeight\n            }),\n            ref: function ref(_ref7) {\n              _this7.container = _ref7;\n            }\n          },\n          imageNode,\n          React.createElement('div', {\n            style: deepExtend({}, styles.modal, styles.modal_disabled)\n          })\n        );\n      }\n\n      return React.createElement(\n        'div',\n        {\n          onMouseDown: this.handleDragStart.bind(this),\n          onTouchStart: this.handleDragStart.bind(this),\n          style: deepExtend({}, styles.container, {\n            'position': 'relative',\n            'height': imgHeight\n          }),\n          ref: function ref(_ref10) {\n            _this7.container = _ref10;\n          }\n        },\n        imageNode,\n        imgLoaded ? React.createElement(\n          'div',\n          null,\n          React.createElement('div', {\n            style: styles.modal\n          }),\n          React.createElement(\n            'div',\n            {\n              style: deepExtend({}, styles.frame, dragging ? styles.dragging_frame : {}, {\n                display: 'block',\n                left: this.state.toImgLeft4Style,\n                top: this.state.toImgTop4Style,\n                width: this.state.frameWidth4Style,\n                height: this.state.frameHeight4Style\n              }),\n              ref: function ref(_ref9) {\n                _this7.frameNode = _ref9;\n              }\n            },\n            React.createElement(\n              'div',\n              {\n                style: styles.clone\n              },\n              React.createElement('img', {\n                src: src,\n                crossOrigin: 'anonymous',\n                width: imgWidth,\n                height: imgHeight,\n                style: deepExtend({}, styles.img, {\n                  marginLeft: -1 * this.state.toImgLeft4Style,\n                  marginTop: -1 * this.state.toImgTop4Style\n                }),\n                ref: function ref(_ref8) {\n                  _this7.cloneImg = _ref8;\n                }\n              })\n            ),\n            React.createElement('span', {\n              'data-action': 'move',\n              style: styles.move\n            }),\n            React.createElement(\n              'span',\n              {\n                'data-action': 'move',\n                style: deepExtend({}, styles.dot, styles.dotCenter)\n              },\n              React.createElement('span', {\n                style: deepExtend({}, styles.dotInner, styles.dotInnerCenterVertical)\n              }),\n              React.createElement('span', {\n                style: deepExtend({}, styles.dotInner, styles.dotInnerCenterHorizontal)\n              })\n            ),\n            React.createElement(\n              'span',\n              {\n                'data-action': 'ne',\n                style: deepExtend({}, styles.dot, styles.dotNE)\n              },\n              React.createElement('span', {\n                style: deepExtend({}, styles.dotInner, styles.dotInnerNE)\n              })\n            ),\n            React.createElement(\n              'span',\n              {\n                'data-action': 'n',\n                style: deepExtend({}, styles.dot, styles.dotN)\n              },\n              React.createElement('span', {\n                style: deepExtend({}, styles.dotInner, styles.dotInnerN)\n              })\n            ),\n            React.createElement(\n              'span',\n              {\n                'data-action': 'nw',\n                style: deepExtend({}, styles.dot, styles.dotNW)\n              },\n              React.createElement('span', {\n                style: deepExtend({}, styles.dotInner, styles.dotInnerNW)\n              })\n            ),\n            React.createElement(\n              'span',\n              {\n                'data-action': 'e',\n                style: deepExtend({}, styles.dot, styles.dotE)\n              },\n              React.createElement('span', {\n                style: deepExtend({}, styles.dotInner, styles.dotInnerE)\n              })\n            ),\n            React.createElement(\n              'span',\n              {\n                'data-action': 'w',\n                style: deepExtend({}, styles.dot, styles.dotW)\n              },\n              React.createElement('span', {\n                style: deepExtend({}, styles.dotInner, styles.dotInnerW)\n              })\n            ),\n            React.createElement(\n              'span',\n              {\n                'data-action': 'se',\n                style: deepExtend({}, styles.dot, styles.dotSE)\n              },\n              React.createElement('span', {\n                style: deepExtend({}, styles.dotInner, styles.dotInnerSE)\n              })\n            ),\n            React.createElement(\n              'span',\n              {\n                'data-action': 's',\n                style: deepExtend({}, styles.dot, styles.dotS)\n              },\n              React.createElement('span', {\n                style: deepExtend({}, styles.dotInner, styles.dotInnerS)\n              })\n            ),\n            React.createElement(\n              'span',\n              {\n                'data-action': 'sw',\n                style: deepExtend({}, styles.dot, styles.dotSW)\n              },\n              React.createElement('span', {\n                style: deepExtend({}, styles.dotInner, styles.dotInnerSW)\n              })\n            ),\n            React.createElement('span', {\n              'data-action': 'n',\n              style: deepExtend({}, styles.line, styles.lineN)\n            }),\n            React.createElement('span', {\n              'data-action': 's',\n              style: deepExtend({}, styles.line, styles.lineS)\n            }),\n            React.createElement('span', {\n              'data-action': 'w',\n              style: deepExtend({}, styles.line, styles.lineW)\n            }),\n            React.createElement('span', {\n              'data-action': 'e',\n              style: deepExtend({}, styles.line, styles.lineE)\n            })\n          )\n        ) : null\n      );\n    }\n  }]);\n\n  return Cropper;\n}(Component);\n\nCropper.propTypes = {\n  src: PropTypes.string.isRequired,\n  originX: PropTypes.number,\n  originY: PropTypes.number,\n  ratio: PropTypes.number,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  fixedRatio: PropTypes.bool,\n  allowNewSelection: PropTypes.bool,\n  disabled: PropTypes.bool,\n  styles: PropTypes.object,\n  onImgLoad: PropTypes.func,\n  beforeImgLoad: PropTypes.func,\n  onChange: PropTypes.func\n};\n\nCropper.defaultProps = {\n  width: 200,\n  height: 200,\n  fixedRatio: true,\n  allowNewSelection: true,\n  ratio: 1,\n  originX: 0,\n  originY: 0,\n  styles: {},\n  onImgLoad: function onImgLoad() {},\n  beforeImgLoad: function beforeImgLoad() {}\n\n  /*\n  default inline styles\n  */\n};var defaultStyles = {\n  container: {},\n  img: {\n    userDrag: 'none',\n    userSelect: 'none',\n    MozUserSelect: 'none',\n    WebkitUserDrag: 'none',\n    WebkitUserSelect: 'none',\n    WebkitTransform: 'translateZ(0)',\n    WebkitPerspective: 1000,\n    WebkitBackfaceVisibility: 'hidden'\n  },\n\n  clone: {\n    width: '100%',\n    height: '100%',\n    overflow: 'hidden',\n    position: 'absolute',\n    left: 0,\n    top: 0\n  },\n\n  frame: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    display: 'none'\n  },\n\n  dragging_frame: {\n    opacity: 0.8\n  },\n\n  source: {\n    overflow: 'hidden'\n  },\n\n  source_img: {\n    float: 'left'\n  },\n\n  modal: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    opacity: 0.4,\n    backgroundColor: '#000'\n  },\n  modal_disabled: {\n    backgroundColor: '#666',\n    opacity: 0.7,\n    cursor: 'not-allowed'\n  },\n  move: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    cursor: 'move',\n    outline: '1px dashed #88f',\n    backgroundColor: 'transparent'\n  },\n\n  dot: {\n    zIndex: 10\n  },\n  dotN: {\n    cursor: 'n-resize'\n  },\n  dotS: {\n    cursor: 's-resize'\n  },\n  dotE: {\n    cursor: 'e-resize'\n  },\n  dotW: {\n    cursor: 'w-resize'\n  },\n  dotNW: {\n    cursor: 'nw-resize'\n  },\n  dotNE: {\n    cursor: 'ne-resize'\n  },\n  dotSW: {\n    cursor: 'sw-resize'\n  },\n  dotSE: {\n    cursor: 'se-resize'\n  },\n  dotCenter: {\n    backgroundColor: 'transparent',\n    cursor: 'move'\n  },\n\n  dotInner: {\n    border: '1px solid #88f',\n    background: '#fff',\n    display: 'block',\n    width: 6,\n    height: 6,\n    padding: 0,\n    margin: 0,\n    position: 'absolute'\n  },\n\n  dotInnerN: {\n    top: -4,\n    left: '50%',\n    marginLeft: -4\n  },\n  dotInnerS: {\n    bottom: -4,\n    left: '50%',\n    marginLeft: -4\n  },\n  dotInnerE: {\n    right: -4,\n    top: '50%',\n    marginTop: -4\n  },\n  dotInnerW: {\n    left: -4,\n    top: '50%',\n    marginTop: -4\n  },\n  dotInnerNE: {\n    top: -4,\n    right: -4\n  },\n  dotInnerSE: {\n    bottom: -4,\n    right: -4\n  },\n  dotInnerNW: {\n    top: -4,\n    left: -4\n  },\n  dotInnerSW: {\n    bottom: -4,\n    left: -4\n  },\n  dotInnerCenterVertical: {\n    position: 'absolute',\n    border: 'none',\n    width: 2,\n    height: 8,\n    backgroundColor: '#88f',\n    top: '50%',\n    left: '50%',\n    marginLeft: -1,\n    marginTop: -4\n  },\n  dotInnerCenterHorizontal: {\n    position: 'absolute',\n    border: 'none',\n    width: 8,\n    height: 2,\n    backgroundColor: '#88f',\n    top: '50%',\n    left: '50%',\n    marginLeft: -4,\n    marginTop: -1\n  },\n\n  line: {\n    position: 'absolute',\n    display: 'block',\n    zIndex: 100\n  },\n\n  lineS: {\n    cursor: 's-resize',\n    bottom: 0,\n    left: 0,\n    width: '100%',\n    height: 4,\n    background: 'transparent'\n  },\n  lineN: {\n    cursor: 'n-resize',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: 4,\n    background: 'transparent'\n  },\n  lineE: {\n    cursor: 'e-resize',\n    right: 0,\n    top: 0,\n    width: 4,\n    height: '100%',\n    background: 'transparent'\n  },\n  lineW: {\n    cursor: 'w-resize',\n    left: 0,\n    top: 0,\n    width: 4,\n    height: '100%',\n    background: 'transparent'\n  }\n};\n\nmodule.exports = Cropper;"]},"metadata":{},"sourceType":"script"}