{"ast":null,"code":"import _regeneratorRuntime from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{getAPI}from'../../apis/Axios';import{useMediaQuery}from'react-responsive';import InfiniteScroll from'react-infinite-scroll-component';import{jsx as _jsx}from\"react/jsx-runtime\";var InfiniteList=function InfiniteList(_ref){var list=_ref.list,elem=_ref.elem,id=_ref.id,children=_ref.children,api=_ref.api,action=_ref.action;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var isDesktop=useMediaQuery({query:'(min-width: 1224px)'});var _useState=useState(1),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),load=_useState4[0],setLoad=_useState4[1];var getData=function getData(){setPage(page+1);setLoad(true);};useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!load){_context.next=14;break;}if(!id){_context.next=7;break;}_context.next=4;return getAPI(\"\".concat(api,\"/\").concat(id,\"?page=\").concat(page),auth.token);case 4:res=_context.sent;_context.next=10;break;case 7:_context.next=9;return getAPI(\"\".concat(api,\"?page=\").concat(page),auth.token);case 9:res=_context.sent;case 10:setLoad(false);if(!(res.data.result.length===0)){_context.next=13;break;}return _context.abrupt(\"return\");case 13:dispatch({type:\"\".concat(action),payload:res.data.result});case 14:case\"end\":return _context.stop();}}},_callee);})),[load]);return/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:list.length,next:getData,hasMore:true,scrollableTarget:elem,style:isDesktop?{padding:'0 1rem',margin:'0 -1rem',overflow:'unset'}:{},children:children});};export default InfiniteList;","map":{"version":3,"sources":["D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/src/components/util/InfiniteList.js"],"names":["React","useEffect","useState","useDispatch","useSelector","getAPI","useMediaQuery","InfiniteScroll","InfiniteList","list","elem","id","children","api","action","dispatch","state","auth","isDesktop","query","page","setPage","load","setLoad","getData","token","res","data","result","length","type","payload","padding","margin","overflow"],"mappings":"0gBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CAEA,OAASC,MAAT,KAAuB,kBAAvB,CACA,OAASC,aAAT,KAA8B,kBAA9B,CACA,MAAOC,CAAAA,cAAP,KAA2B,iCAA3B,C,2CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAA6C,IAA3CC,CAAAA,IAA2C,MAA3CA,IAA2C,CAArCC,IAAqC,MAArCA,IAAqC,CAA/BC,EAA+B,MAA/BA,EAA+B,CAA3BC,QAA2B,MAA3BA,QAA2B,CAAjBC,GAAiB,MAAjBA,GAAiB,CAAZC,MAAY,MAAZA,MAAY,CAC9D,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CACA,iBAAeC,WAAW,CAAC,SAAAY,KAAK,QAAEA,CAAAA,KAAF,EAAN,CAA1B,CAAOC,IAAP,cAAOA,IAAP,CAEA,GAAMC,CAAAA,SAAS,CAAGZ,aAAa,CAAC,CAAEa,KAAK,CAAE,qBAAT,CAAD,CAA/B,CAEA,cAAwBjB,QAAQ,CAAC,CAAD,CAAhC,wCAAOkB,IAAP,eAAaC,OAAb,eACA,eAAwBnB,QAAQ,CAAC,KAAD,CAAhC,yCAAOoB,IAAP,eAAaC,OAAb,eAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CAClBH,OAAO,CAACD,IAAI,CAAC,CAAN,CAAP,CACAG,OAAO,CAAC,IAAD,CAAP,CACH,CAHD,CAKAtB,SAAS,sEAAC,+IACHqB,IADG,8BAGFX,EAHE,+CAIUN,CAAAA,MAAM,WAAIQ,GAAJ,aAAWF,EAAX,kBAAsBS,IAAtB,EAA8BH,IAAI,CAACQ,KAAnC,CAJhB,QAIFC,GAJE,mEAMUrB,CAAAA,MAAM,WAAIQ,GAAJ,kBAAgBO,IAAhB,EAAwBH,IAAI,CAACQ,KAA7B,CANhB,QAMFC,GANE,uBAOFH,OAAO,CAAC,KAAD,CAAP,CAPE,KAQCG,GAAG,CAACC,IAAJ,CAASC,MAAT,CAAgBC,MAAhB,GAAyB,CAR1B,oEASFd,QAAQ,CAAC,CAACe,IAAI,WAAKhB,MAAL,CAAL,CAAoBiB,OAAO,CAAEL,GAAG,CAACC,IAAJ,CAASC,MAAtC,CAAD,CAAR,CATE,uDAAD,GAWP,CAACN,IAAD,CAXO,CAAT,CAaA,mBACI,KAAC,cAAD,EACI,UAAU,CAAEb,IAAI,CAACoB,MADrB,CAEI,IAAI,CAAEL,OAFV,CAGI,OAAO,CAAE,IAHb,CAII,gBAAgB,CAAEd,IAJtB,CAKI,KAAK,CAAEQ,SAAS,CAAG,CAACc,OAAO,CAAE,QAAV,CAAoBC,MAAM,CAAE,SAA5B,CAAuCC,QAAQ,CAAE,OAAjD,CAAH,CAA+D,EALnF,UAOKtB,QAPL,EADJ,CAWH,CAtCD,CAwCA,cAAeJ,CAAAA,YAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport { getAPI } from '../../apis/Axios'\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport InfiniteScroll from 'react-infinite-scroll-component'\r\n\r\nconst InfiniteList = ({list, elem, id, children, api, action}) => {\r\n    const dispatch = useDispatch()\r\n    const {auth} = useSelector(state=>state)\r\n\r\n    const isDesktop = useMediaQuery({ query: '(min-width: 1224px)' })\r\n\r\n    const [page, setPage] = useState(1)\r\n    const [load, setLoad] = useState(false)\r\n\r\n    const getData = () => {\r\n        setPage(page+1)\r\n        setLoad(true)\r\n    }\r\n\r\n    useEffect(async ()=>{\r\n        if(load) {\r\n            let res\r\n            id ? \r\n            res = await getAPI(`${api}/${id}?page=${page}`, auth.token)\r\n            :\r\n            res = await getAPI(`${api}?page=${page}`, auth.token)\r\n            setLoad(false)\r\n            if(res.data.result.length===0) return\r\n            dispatch({type: `${action}`, payload: res.data.result})\r\n        }\r\n    },[load])\r\n\r\n    return (\r\n        <InfiniteScroll\r\n            dataLength={list.length}\r\n            next={getData}\r\n            hasMore={true}\r\n            scrollableTarget={elem}\r\n            style={isDesktop ? {padding: '0 1rem', margin: '0 -1rem', overflow: 'unset'} : {}}\r\n        >\r\n            {children}\r\n        </InfiniteScroll>  \r\n    )\r\n}\r\n\r\nexport default InfiniteList\r\n"]},"metadata":{},"sourceType":"module"}