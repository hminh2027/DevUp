{"ast":null,"code":"import _slicedToArray from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from'react';import ReactDOM from'react-dom';import{Link}from'react-router-dom';import{GoPrimitiveDot}from'react-icons/go';import{CgMoreAlt}from'react-icons/cg';import TagIcon from'../../util/TagIcon';import Avatar from'../../util/Avatar';import NoticeOption from'./NoticeOption';import styles from'./NoticeCard.module.css';import moment from'moment';import{readNotice}from'../../../store/actions/noticeAction';import{useDispatch,useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NoticeCard=function NoticeCard(_ref){var msg=_ref.msg;var ref=useRef();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var noticeDropdown=document.getElementById('notice_dropdown');var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showOption=_useState2[0],setShowOption=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isExiting=_useState4[0],setExiting=_useState4[1];var readHandler=function readHandler(){!msg.isRead.includes(auth.user._id)&&dispatch(readNotice(auth,msg));};return/*#__PURE__*/_jsxs(\"div\",{style:{transform:\"\".concat(isExiting&&'translate(-150%,0)')},className:styles.container,children:[/*#__PURE__*/_jsx(Link,{onClick:readHandler,to:\"/\".concat(msg.type,\"/\").concat(msg.url),replace:true,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.notice_wrapper,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.avatar,children:[/*#__PURE__*/_jsx(Avatar,{id:msg.id,src:msg.user.avatar,diameter:\"3.5rem\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.tag_icon_wrapper,children:/*#__PURE__*/_jsx(TagIcon,{tag:msg.tag})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.body,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.text_noti,children:[/*#__PURE__*/_jsx(\"b\",{children:msg.user.username}),\" \",msg.text]}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"\".concat(msg.isRead?'inherit':'#1880bd')},className:styles.time,children:moment(msg.createdAt).fromNow()})]}),!msg.isRead.includes(auth.user._id)&&/*#__PURE__*/_jsx(\"div\",{className:styles.dot,children:/*#__PURE__*/_jsx(GoPrimitiveDot,{})})]})},msg.url),/*#__PURE__*/_jsx(\"div\",{ref:ref,onClick:function onClick(){return setShowOption(true);},style:{opacity:\"\".concat(showOption?'1':'0')},className:styles.notice_option,children:/*#__PURE__*/_jsx(CgMoreAlt,{className:styles.icon})}),showOption&&/*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsx(NoticeOption,{top:ref.current&&ref.current.getBoundingClientRect().y,msg:msg,setExiting:setExiting,setIsShow:setShowOption,isShow:showOption}),noticeDropdown)]});};export default NoticeCard;","map":{"version":3,"sources":["D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/src/components/notification/notices/NoticeCard.js"],"names":["React","useRef","useState","ReactDOM","Link","GoPrimitiveDot","CgMoreAlt","TagIcon","Avatar","NoticeOption","styles","moment","readNotice","useDispatch","useSelector","NoticeCard","msg","ref","dispatch","state","auth","noticeDropdown","document","getElementById","showOption","setShowOption","isExiting","setExiting","readHandler","isRead","includes","user","_id","transform","container","type","url","notice_wrapper","avatar","id","tag_icon_wrapper","tag","body","text_noti","username","text","color","time","createdAt","fromNow","dot","opacity","notice_option","icon","createPortal","current","getBoundingClientRect","y"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport {GoPrimitiveDot} from 'react-icons/go'\r\nimport {CgMoreAlt} from 'react-icons/cg'\r\n\r\nimport TagIcon from '../../util/TagIcon'\r\nimport Avatar from '../../util/Avatar'\r\nimport NoticeOption from './NoticeOption'\r\n\r\nimport styles from './NoticeCard.module.css'\r\nimport moment from 'moment'\r\nimport { readNotice } from '../../../store/actions/noticeAction'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\n\r\nconst NoticeCard = ({msg}) => {\r\n    const ref = useRef()\r\n    const dispatch = useDispatch()\r\n    const {auth} = useSelector(state=>state)\r\n\r\n    const noticeDropdown = document.getElementById('notice_dropdown')\r\n\r\n    const [showOption, setShowOption] = useState(false)\r\n    const [isExiting, setExiting] = useState(false)\r\n\r\n    const readHandler = () => {\r\n        !msg.isRead.includes(auth.user._id) && dispatch(readNotice(auth, msg))\r\n    }\r\n\r\n    return (\r\n    <div style={{transform: `${isExiting&& 'translate(-150%,0)'}`}} className={styles.container}>\r\n        <Link onClick={readHandler} to={`/${msg.type}/${msg.url}`} key={msg.url} replace>\r\n            <div className={styles.notice_wrapper}>\r\n                <div className={styles.avatar}>\r\n                    <Avatar id={msg.id} src={msg.user.avatar} diameter='3.5rem'/>\r\n                    <div className={styles.tag_icon_wrapper}><TagIcon tag={msg.tag} /></div>\r\n                </div>\r\n                <div className={styles.body}>\r\n                    <div className={styles.text_noti}>\r\n                        <b>{msg.user.username}</b> {msg.text}\r\n                    </div>\r\n                    <div style={{color: `${msg.isRead ? 'inherit' : '#1880bd'}`}} className={styles.time}>{moment(msg.createdAt).fromNow()}</div>\r\n                </div>\r\n                {!msg.isRead.includes(auth.user._id) && <div className={styles.dot}><GoPrimitiveDot /></div>}\r\n            </div>\r\n        </Link>\r\n        <div ref={ref} onClick={()=>setShowOption(true)} style={{opacity: `${showOption ? '1' : '0'}`}} className={styles.notice_option}>\r\n            <CgMoreAlt className={styles.icon}/>\r\n        </div>\r\n        {showOption && ReactDOM.createPortal(<NoticeOption top={ref.current && ref.current.getBoundingClientRect().y} msg={msg} setExiting={setExiting} setIsShow={setShowOption} isShow={showOption} />, noticeDropdown)}\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default NoticeCard\r\n"]},"metadata":{},"sourceType":"module"}