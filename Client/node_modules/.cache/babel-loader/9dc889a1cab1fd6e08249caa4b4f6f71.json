{"ast":null,"code":"import _slicedToArray from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import Avatar from'../../util/Avatar';import TextareaAutosize from'react-textarea-autosize';import{createComment}from'../../../store/actions/commentAction';import styles from'./InputComment.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InputComment=function InputComment(_ref){var onReply=_ref.onReply,post=_ref.post;var dispatch=useDispatch();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),body=_useState2[0],setBody=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),onSubmit=_useState4[0],setOnSubmit=_useState4[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,socket=_useSelector.socket;useEffect(function(){if(onSubmit)submitHandler();},[onSubmit]);useEffect(function(){if(onReply)setBody(onReply.user.username);},[onReply]);var submitHandler=function submitHandler(){var trimBody=body.trim();if(trimBody=='')return;var newComment={body:trimBody,createdAt:new Date().toISOString(),reply:onReply&&(onReply.reply?onReply.reply:onReply._id),tag:onReply&&onReply.user};dispatch(createComment(auth,newComment,post,socket));setBody('');setOnSubmit(false);};var inputHandler=function inputHandler(e){if(e.charCode==13){e.preventDefault();setOnSubmit(true);}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,className:styles.container,children:[/*#__PURE__*/_jsx(Avatar,{diameter:onReply?'2rem':'2.5rem',id:auth.user._id,src:auth.user.avatar}),/*#__PURE__*/_jsx(\"div\",{className:styles.input_wrapper,children:/*#__PURE__*/_jsx(TextareaAutosize,{value:body,onKeyPress:inputHandler,spellCheck:\"false\",onChange:function onChange(e){return setBody(e.target.value);},className:styles.input,placeholder:\"Write your comment here...\"})})]});};export default InputComment;","map":{"version":3,"sources":["D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/src/components/post/comment/InputComment.js"],"names":["React","useEffect","useState","useSelector","useDispatch","Avatar","TextareaAutosize","createComment","styles","InputComment","onReply","post","dispatch","body","setBody","onSubmit","setOnSubmit","state","auth","socket","submitHandler","user","username","trimBody","trim","newComment","createdAt","Date","toISOString","reply","_id","tag","inputHandler","e","charCode","preventDefault","container","avatar","input_wrapper","target","value","input"],"mappings":"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","sourcesContent":["import React, {useEffect, useState } from 'react'\r\nimport {useSelector, useDispatch} from 'react-redux'\r\n\r\nimport Avatar from '../../util/Avatar'\r\nimport TextareaAutosize from 'react-textarea-autosize'\r\nimport {createComment} from '../../../store/actions/commentAction'\r\n\r\nimport styles from './InputComment.module.css'\r\n\r\nconst InputComment = ({onReply, post}) => {\r\n    const dispatch = useDispatch()\r\n\r\n    const [body, setBody] = useState('')\r\n    const [onSubmit, setOnSubmit] = useState(false)\r\n    const {auth, socket} = useSelector(state=>state)\r\n\r\n    useEffect(()=>{\r\n        if(onSubmit) submitHandler()\r\n    },[onSubmit])\r\n\r\n    useEffect(()=>{\r\n        if(onReply) setBody(onReply.user.username)\r\n    },[onReply])\r\n\r\n    const submitHandler = () => {\r\n        const trimBody = body.trim()\r\n        if(trimBody=='') return\r\n        const newComment = {\r\n            body: trimBody,\r\n            createdAt: new Date().toISOString(),\r\n            reply: onReply && (onReply.reply ? onReply.reply : onReply._id),\r\n            tag: onReply && onReply.user\r\n        }\r\n        dispatch(createComment(auth, newComment, post, socket))\r\n        setBody('')\r\n        setOnSubmit(false)\r\n    }\r\n\r\n    const inputHandler = (e) => {\r\n        if(e.charCode == 13) {\r\n            e.preventDefault()\r\n            setOnSubmit(true)\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <form onSubmit={submitHandler} className={styles.container}>\r\n            <Avatar diameter={onReply ? '2rem' : '2.5rem'} id={auth.user._id} src={auth.user.avatar} />\r\n            <div className={styles.input_wrapper}>\r\n                <TextareaAutosize value={body} onKeyPress={inputHandler} spellCheck='false' onChange={e=>setBody(e.target.value)} className={styles.input} placeholder='Write your comment here...' />\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default InputComment\r\n"]},"metadata":{},"sourceType":"module"}