{"ast":null,"code":"import _regeneratorRuntime from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{MdRemove}from'react-icons/md';import{shareProject}from'../../store/actions/projectAction';import SearchResult from'../code/projectManager/search/SearchResult';import UserCard from'../util/UserCard';import styles from'./ShareProjectModal.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ShareProjectModal=function ShareProjectModal(_ref){var project=_ref.project,setIsEdit=_ref.setIsEdit;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,socket=_useSelector.socket;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),selectedUsers=_useState2[0],setSelectedUsers=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){setSelectedUsers(project.receivers);},[project]);var unselectUser=function unselectUser(user){var newUsers=selectedUsers.filter(function(u){return u._id!=user._id;});setSelectedUsers(newUsers);};var submitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var ids;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!loading){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoading(true);ids=selectedUsers.map(function(u){return u._id;});_context.next=6;return dispatch(shareProject(ids,project._id,auth,socket));case 6:dispatch({type:'MODAL',payload:false});setLoading(false);setIsEdit(false);case 9:case\"end\":return _context.stop();}}},_callee);}));return function submitHandler(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.title,children:\"Share Project\"}),/*#__PURE__*/_jsx(SearchResult,{selectedUsers:selectedUsers,setSelectedUsers:setSelectedUsers}),/*#__PURE__*/_jsxs(\"div\",{className:styles.text,children:[\"List of selected peoples: \",selectedUsers.length]}),/*#__PURE__*/_jsx(\"div\",{className:styles.content,children:selectedUsers.map(function(user){return/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return unselectUser(user);},className:styles.user_wrapper,children:[/*#__PURE__*/_jsx(UserCard,{height:\"2rem\",avatar:user.avatar,username:user.username}),/*#__PURE__*/_jsx(\"div\",{className:styles.remove_btn,children:/*#__PURE__*/_jsx(MdRemove,{})})]},user._id);})}),/*#__PURE__*/_jsx(\"button\",{onClick:submitHandler,className:styles.submit,children:\"Update\"})]});};export default ShareProjectModal;","map":{"version":3,"sources":["D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/src/components/modal/ShareProjectModal.js"],"names":["React","useEffect","useState","useDispatch","useSelector","MdRemove","shareProject","SearchResult","UserCard","styles","ShareProjectModal","project","setIsEdit","dispatch","state","auth","socket","selectedUsers","setSelectedUsers","loading","setLoading","receivers","unselectUser","user","newUsers","filter","u","_id","submitHandler","ids","map","type","payload","container","title","text","length","content","user_wrapper","avatar","username","remove_btn","submit"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\n\r\nimport {MdRemove} from 'react-icons/md'\r\nimport { shareProject } from '../../store/actions/projectAction'\r\n\r\nimport SearchResult from '../code/projectManager/search/SearchResult'\r\nimport UserCard from '../util/UserCard'\r\n\r\nimport styles from './ShareProjectModal.module.css'\r\n\r\nconst ShareProjectModal = ({project, setIsEdit}) => {\r\n    const dispatch = useDispatch()\r\n\r\n    const {auth, socket} = useSelector(state=>state)\r\n    const [selectedUsers, setSelectedUsers] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    useEffect(()=>{\r\n        setSelectedUsers(project.receivers)\r\n    },[project])\r\n\r\n    const unselectUser = (user) => {   \r\n        const newUsers = selectedUsers.filter(u => u._id != user._id)\r\n        setSelectedUsers(newUsers)\r\n    }\r\n\r\n    const submitHandler = async () => {\r\n        if(loading) return\r\n        setLoading(true)\r\n        const ids = selectedUsers.map(u=> u._id)\r\n        await dispatch(shareProject(ids, project._id, auth, socket))\r\n        dispatch({type: 'MODAL', payload: false})\r\n        setLoading(false)\r\n        setIsEdit(false)\r\n    }\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.title}>Share Project</div>\r\n            <SearchResult selectedUsers={selectedUsers} setSelectedUsers={setSelectedUsers} />\r\n            <div className={styles.text}>List of selected peoples: {selectedUsers.length}</div>\r\n            <div className={styles.content}>\r\n                {selectedUsers.map(user=>(\r\n                    <div onClick={()=>unselectUser(user)}  key={user._id} className={styles.user_wrapper}>\r\n                        <UserCard height='2rem' avatar={user.avatar} username={user.username} />\r\n                        <div className={styles.remove_btn}><MdRemove/></div>\r\n                    </div>\r\n                    \r\n                ))}    \r\n            </div>\r\n            <button onClick={submitHandler} className={styles.submit}>Update</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ShareProjectModal\r\n"]},"metadata":{},"sourceType":"module"}