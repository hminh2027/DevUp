{"ast":null,"code":"import axios from 'axios';\nimport store from '../store/index';\nimport { authActions } from '../store/slices/auth';\n\nconst postLogin = async bodyFormData => {\n  try {\n    const res = await axios.post('http://localhost:5000/api/auth/login', bodyFormData, {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    });\n\n    if (res.status === 200) {\n      localStorage.setItem('TOKEN', res.data.accessToken);\n    }\n\n    await getLogin(bodyFormData);\n    return res;\n  } catch (err) {\n    return err.response.data;\n  }\n};\n\nconst getLogin = async bodyFormData => {\n  axios.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem('TOKEN')}`;\n\n  try {\n    const res = await axios.get('http://localhost:5000/api/auth/login', {\n      params: {\n        username: 'minh52'\n      }\n    });\n    if (res.status === 200) store.dispatch(authActions.login());\n  } catch (err) {\n    localStorage.removeItem(TOKEN);\n    delete axios.defaults.headers.common['Authorization'];\n    store.dispatch(authActions.logout());\n    res.status(400).send(err.message);\n    return err.message;\n  }\n};\n\nexport { postLogin };","map":{"version":3,"sources":["D:/Project Web/PROJECT 12 (Only MERN)/Client/client/src/apis/Axios.js"],"names":["axios","store","authActions","postLogin","bodyFormData","res","post","headers","status","localStorage","setItem","data","accessToken","getLogin","err","response","defaults","common","getItem","get","params","username","dispatch","login","removeItem","TOKEN","logout","send","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,SAAQC,WAAR,QAA0B,sBAA1B;;AAEA,MAAMC,SAAS,GAAG,MAAOC,YAAP,IAAwB;AACtC,MAAI;AACA,UAAMC,GAAG,GAAG,MAAML,KAAK,CAACM,IAAN,CAAW,sCAAX,EAAkDF,YAAlD,EAA+D;AAC7EG,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB;AADoE,KAA/D,CAAlB;;AAGA,QAAGF,GAAG,CAACG,MAAJ,KAAe,GAAlB,EAAsB;AAClBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BL,GAAG,CAACM,IAAJ,CAASC,WAAtC;AACH;;AACD,UAAMC,QAAQ,CAACT,YAAD,CAAd;AACA,WAAOC,GAAP;AACH,GATD,CASE,OAAMS,GAAN,EAAW;AACT,WAAOA,GAAG,CAACC,QAAJ,CAAaJ,IAApB;AACH;AACJ,CAbD;;AAeA,MAAME,QAAQ,GAAG,MAAOT,YAAP,IAAwB;AACrCJ,EAAAA,KAAK,CAACgB,QAAN,CAAeT,OAAf,CAAuBU,MAAvB,CAA8B,eAA9B,IAAkD,UAASR,YAAY,CAACS,OAAb,CAAqB,OAArB,CAA8B,EAAzF;;AACA,MAAI;AACA,UAAMb,GAAG,GAAG,MAAML,KAAK,CAACmB,GAAN,CAAU,sCAAV,EAAiD;AAC/DC,MAAAA,MAAM,EAAE;AACNC,QAAAA,QAAQ,EAAE;AADJ;AADuD,KAAjD,CAAlB;AAIA,QAAGhB,GAAG,CAACG,MAAJ,KAAe,GAAlB,EAAuBP,KAAK,CAACqB,QAAN,CAAepB,WAAW,CAACqB,KAAZ,EAAf;AAC1B,GAND,CAME,OAAMT,GAAN,EAAW;AACTL,IAAAA,YAAY,CAACe,UAAb,CAAwBC,KAAxB;AACA,WAAOzB,KAAK,CAACgB,QAAN,CAAeT,OAAf,CAAuBU,MAAvB,CAA8B,eAA9B,CAAP;AACAhB,IAAAA,KAAK,CAACqB,QAAN,CAAepB,WAAW,CAACwB,MAAZ,EAAf;AACArB,IAAAA,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBmB,IAAhB,CAAqBb,GAAG,CAACc,OAAzB;AACA,WAAOd,GAAG,CAACc,OAAX;AACH;AACJ,CAfD;;AAiBA,SAAQzB,SAAR","sourcesContent":["import axios from 'axios';\r\nimport store from '../store/index';\r\nimport {authActions} from '../store/slices/auth';\r\n\r\nconst postLogin = async (bodyFormData) => {\r\n    try {\r\n        const res = await axios.post('http://localhost:5000/api/auth/login',bodyFormData,{\r\n            headers: {'content-type': 'multipart/form-data'}\r\n        });\r\n        if(res.status === 200){\r\n            localStorage.setItem('TOKEN',res.data.accessToken);\r\n        }\r\n        await getLogin(bodyFormData);\r\n        return res;\r\n    } catch(err) {\r\n        return err.response.data;\r\n    }\r\n}\r\n\r\nconst getLogin = async (bodyFormData) => {\r\n    axios.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem('TOKEN')}`;\r\n    try {\r\n        const res = await axios.get('http://localhost:5000/api/auth/login',{\r\n            params: {\r\n              username: 'minh52'\r\n            }});\r\n        if(res.status === 200) store.dispatch(authActions.login());\r\n    } catch(err) {\r\n        localStorage.removeItem(TOKEN);\r\n        delete axios.defaults.headers.common['Authorization'];\r\n        store.dispatch(authActions.logout());\r\n        res.status(400).send(err.message);\r\n        return err.message;\r\n    }\r\n}\r\n\r\nexport {postLogin};"]},"metadata":{},"sourceType":"module"}