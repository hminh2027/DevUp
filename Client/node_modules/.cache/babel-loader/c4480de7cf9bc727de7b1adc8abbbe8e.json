{"ast":null,"code":"import _regeneratorRuntime from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{postAPI,deleteAPI,getAPI,patchAPI}from'../../apis/Axios';export var createNotice=function createNotice(auth,msg,socket){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return postAPI(\"notice\",msg,auth.token);case 3:res=_context.sent;socket.emit('createNotice',_objectSpread(_objectSpread({},res.data.notice),{},{user:{username:auth.user.username,avatar:auth.user.avatar}}));_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:'ALERT',payload:_context.t0.response.data.msg});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var deleteNotice=function deleteNotice(auth,id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var notice;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return deleteAPI(\"notice/\".concat(id),auth.token);case 3:notice=_context2.sent;notice.status=200&&dispatch({type:'ALERT',payload:'Notice deleted!'});dispatch({type:'DELETE_NOTICE',payload:id});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);dispatch({type:'ALERT',payload:_context2.t0.response.data.msg});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var deletePostNotices=function deletePostNotices(auth,url){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:try{deleteAPI(\"notice/postDelete?url=\".concat(url),auth.token);}catch(err){dispatch({type:'ALERT',payload:err.response.data.msg});}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var deleteNotices=function deleteNotices(auth){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return deleteAPI(\"notice\",auth.token);case 3:res=_context4.sent;dispatch({type:'DELETE_NOTICES',payload:[]});_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);dispatch({type:'ALERT',payload:_context4.t0.response.data.msg});case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var unreadNotice=function unreadNotice(auth,msg){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return patchAPI(\"notice/\".concat(msg._id,\"/unread\"),null,auth.token);case 3:res=_context5.sent;dispatch({type:'UPDATE_NOTICE',payload:res.data.notice});_context5.next=10;break;case 7:_context5.prev=7;_context5.t0=_context5[\"catch\"](0);dispatch({type:'ALERT',payload:_context5.t0.response.data.msg});case 10:case\"end\":return _context5.stop();}}},_callee5,null,[[0,7]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export var readNotice=function readNotice(auth,msg){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;console.log(msg);if(msg){_context6.next=4;break;}return _context6.abrupt(\"return\");case 4:_context6.next=6;return patchAPI(\"notice/\".concat(msg._id,\"/read\"),null,auth.token);case 6:res=_context6.sent;dispatch({type:'UPDATE_NOTICE',payload:res.data.notice});_context6.next=13;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](0);dispatch({type:'ALERT',payload:_context6.t0.response.data.msg});case 13:case\"end\":return _context6.stop();}}},_callee6,null,[[0,10]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};export var readNotices=function readNotices(auth){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return patchAPI('notice/read',null,auth.token);case 3:res=_context7.sent;_context7.next=9;break;case 6:_context7.prev=6;_context7.t0=_context7[\"catch\"](0);dispatch({type:'ALERT',payload:_context7.t0.response.data.msg});case 9:case\"end\":return _context7.stop();}}},_callee7,null,[[0,6]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};export var getNotices=function getNotices(auth){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;dispatch({type:'LOADING_NOTICES',payload:true});_context8.next=4;return getAPI(\"notice\",auth.token);case 4:res=_context8.sent;dispatch({type:'GET_NOTICES',payload:res.data.notices});dispatch({type:'LOADING_NOTICES',payload:false});_context8.next=12;break;case 9:_context8.prev=9;_context8.t0=_context8[\"catch\"](0);dispatch({type:'ALERT',payload:_context8.t0.response.data});case 12:case\"end\":return _context8.stop();}}},_callee8,null,[[0,9]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};","map":{"version":3,"sources":["D:/Project Web/Project Web/PROJECT 12 (Only MERN)/Client/src/store/actions/noticeAction.js"],"names":["postAPI","deleteAPI","getAPI","patchAPI","createNotice","auth","msg","socket","dispatch","token","res","emit","data","notice","user","username","avatar","type","payload","response","deleteNotice","id","status","deletePostNotices","url","err","deleteNotices","unreadNotice","_id","readNotice","console","log","readNotices","getNotices","notices"],"mappings":"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","sourcesContent":["import {postAPI, deleteAPI, getAPI, patchAPI} from '../../apis/Axios'\r\n\r\nexport const createNotice = (auth, msg, socket) => async (dispatch) => {\r\n  try {\r\n    const res = await postAPI(`notice`, msg, auth.token)\r\n\r\n    socket.emit('createNotice', {\r\n      ...res.data.notice,\r\n      user: {\r\n        username: auth.user.username,\r\n        avatar: auth.user.avatar\r\n      }\r\n    })\r\n\r\n  }   catch (err) {\r\n      dispatch({type: 'ALERT', payload: err.response.data.msg})\r\n  }\r\n}\r\n\r\nexport const deleteNotice = (auth, id) => async (dispatch) => {\r\n\r\n  try {\r\n    const notice = await deleteAPI(`notice/${id}`, auth.token)\r\n    \r\n    notice.status = 200 && dispatch({type: 'ALERT', payload: 'Notice deleted!'})\r\n    \r\n    dispatch({type: 'DELETE_NOTICE', payload: id})\r\n\r\n\r\n  } catch(err) {\r\n    dispatch({type: 'ALERT', payload: err.response.data.msg})\r\n  }\r\n}\r\n\r\nexport const deletePostNotices = (auth, url) => async (dispatch) => {\r\n  try {\r\n    deleteAPI(`notice/postDelete?url=${url}`, auth.token)\r\n\r\n  } catch(err) {\r\n    dispatch({type: 'ALERT', payload: err.response.data.msg})\r\n  }\r\n}\r\n\r\nexport const deleteNotices = (auth) => async (dispatch) => {\r\n  try {\r\n    const res = await deleteAPI(`notice`, auth.token)\r\n    dispatch({type: 'DELETE_NOTICES', payload: []})\r\n\r\n  } catch(err) {\r\n    dispatch({type: 'ALERT', payload: err.response.data.msg})\r\n  }\r\n}\r\n\r\nexport const unreadNotice = (auth, msg) => async (dispatch) => {\r\n  try {\r\n    const res = await patchAPI(`notice/${msg._id}/unread`, null, auth.token)\r\n    \r\n    dispatch({type: 'UPDATE_NOTICE' , payload: res.data.notice})\r\n\r\n  } catch(err) {\r\n    dispatch({type: 'ALERT', payload: err.response.data.msg})\r\n  }\r\n}\r\n\r\nexport const readNotice = (auth, msg) => async (dispatch) => {\r\n  try {\r\n    console.log(msg)\r\n    if(!msg) return\r\n    const res = await patchAPI(`notice/${msg._id}/read`, null, auth.token)\r\n\r\n    dispatch({type: 'UPDATE_NOTICE' , payload: res.data.notice})\r\n\r\n  } catch(err) {\r\n    dispatch({type: 'ALERT', payload: err.response.data.msg})\r\n  }\r\n}\r\n\r\nexport const readNotices = (auth) => async (dispatch) => {\r\n  try {\r\n    const res = await patchAPI('notice/read', null, auth.token)\r\n\r\n  } catch(err) {\r\n    dispatch({type: 'ALERT', payload: err.response.data.msg})\r\n  }\r\n}\r\n\r\nexport const getNotices = (auth) => async (dispatch) => {\r\n  try {\r\n    dispatch({type: 'LOADING_NOTICES', payload: true})\r\n    const res = await getAPI(`notice`, auth.token)\r\n    dispatch({type: 'GET_NOTICES' , payload: res.data.notices})\r\n    dispatch({type: 'LOADING_NOTICES', payload: false})\r\n\r\n  } catch(err) {\r\n    dispatch({type: 'ALERT', payload: err.response.data})\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}